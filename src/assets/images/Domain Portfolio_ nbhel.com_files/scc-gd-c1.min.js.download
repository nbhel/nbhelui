!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("scc-gd-c1",[],t):"object"==typeof exports?exports["scc-gd-c1"]=t():e["scc-gd-c1"]=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>Ku});var n={};e.r(n),e.d(n,{_isDebug:()=>R,debug:()=>F,error:()=>q,info:()=>A,log:()=>A,setDebug:()=>L,warn:()=>B});var r={};function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.r(r),e.d(r,{cmdGetTrackingValues:()=>Pa,cmdLog:()=>Sa,cmdLogImpression:()=>Ea,cmdLogPageEvent:()=>ja,cmdLogPagePerf:()=>ka,cmdLogPageRequest:()=>Oa});var c,u,s,f,l,p=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];try{if(t(n,r))return e}catch(e){}}return e},d=function(){for(var e={},t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];"object"===a(n)&&p(n,(function(t,n){e[t]=n}))}return e},y=function e(t){for(var n in t)void 0===t[n]?delete t[n]:"object"===a(t[n])&&(e(t[n]),0===Object.keys(t[n]).length&&delete t[n]);return t},v=function(e){if(2===e.length)return e[1]},m=function(e,t,n){if("string"!=typeof e)return{};for(var r={},o=e.split(t),i=0;i<o.length;i++){var a=o[i].split(n);r[a[0]]=v(a)}return r},b=function(e,t,n){var r=[];return p(e,(function(e,t){r.push("".concat(e).concat(n).concat(t))})),0===r.length?"":r.join(t)},h=function e(t,n){return n&&(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),Object.keys(t).forEach((function(r){if("object"===a(t[r])){var o=e(t[r],n);n&&(t[r]=o)}})),Object.freeze(t)},g=(c="",s={document:u=Object.create({get cookie(){return c},set cookie(e){c=e}})},f={},"undefined"==typeof window?{window:s,document:u,navigator:f}:{window:window||s,document:window.document||u,navigator:navigator||f}),_=function(){return g.window},w=function(){return g.document},O=function(){return g.navigator},j=function(){var e=_().location;return e&&e.hostname?e.hostname:""},S=function(){var e=j(),t=e.split(".");return t.length>=2&&"co.uk"===(e=t.splice(t.length-2).join("."))&&(e="".concat(t.pop(),".").concat(e)),e},P=function e(t,n,r){var o=r||1;if(n&&!(o>10)){var i=t(n);return!i&&n.parentNode?e(t,n.parentNode,o+1):i}},k=function(){return _().event},E=function(){var e=k();if(void 0!==e&&null!=e){var t=e.target||e.srcElement;if(void 0!==t&&null!=t)return t.nodeType&&3===t.nodeType&&(t=t.parentNode),t}},x=function(e,t){if(e&&e.attributes&&e.attributes[t]&&e.attributes[t].value)return e.attributes[t].value},C=function(e){var t=e.nodeName;return"A"===t||"AREA"===t},T=function(e,t){var n=e||E(),r={};return n&&P((function(e){p(t,(function(t,n){var o=x(e,n);o&&!r[t]&&(r[t]=o)})),C(e)&&(r.href=x(e,"href"))}),n),r},I=function(e,t){var n=w(),r=O(),o=t||k(),i=e||E(),a={};if(i){a.type=i.type,a.eventid=i.id,a.eventclass=i.className,a.eventname=i.name,P((function(e){var t,n=x(e,"data-tcode"),r=x(e,"data-tdata"),o=x(e,"data-ci"),i=x(e,"data-tms"),c=x(e,"data-eid");if(c||(c=x(e,"data-e_id")),c||(c=x(e,"e_id")),C(e)&&(t=x(e,"href")),n||r||o||i||c||t)return n&&(a.tcode=n),r&&(a.usrin=r),o&&(a.ci=o),i&&(a.tms=i),c&&(a.e_id=c),t&&(a.href=t),a}),i);var c=function(e,t,n){if(n&&n.clientX&&n.clientY&&n.pageX&&n.pageY){var r={};if(e&&t&&-1!==t.userAgent.indexOf("MSIE")){var o="CSS1Compat"===e.compatMode?e.documentElement:e.body;r.pagex=Math.round(n.clientX+(o.scrollLeft?o.scrollLeft:0)),r.pagey=Math.round(n.clientY+(o.scrollTop?o.scrollTop:0))}else r.pagex=Math.round(n.pageX),r.pagey=Math.round(n.pageY);return r.clientx=Math.round(n.clientX),r.clienty=Math.round(n.clientY),r}}(n,r,o);if(c)a.absolutex=c.pagex,a.absolutey=c.pagey,a.relativex=c.clientx,a.relativey=c.clienty;else{var u=function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}(i),s=function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}(i);a.absolutex=u,a.absolutey=s,a.relativex=u,a.relativey=s}}return y(a),a},R=!1,L=function(e){R=!0===e||"true"===e},D=function(e){return _().console,function(){}},A=D(),q=D(),B=D(),F=function(){if(R){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];A.apply(null,t)}},M=function(e){if(_()[l])return _()[l][e]},N=function(e,t){_()[l]&&(_()[l][e]=t)},U=function(e,t){_()[e]=t,N(e,t)};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===V(t)?t:String(t)}const z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.properties=t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],(o=W(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t):{}}var t,n;return t=e,(n=[{key:"clear",value:function(){this.properties={}}},{key:"get",value:function(e){if(this.properties.hasOwnProperty(e))return this.properties[e]}},{key:"set",value:function(e,t){this.properties[e]=t}},{key:"isSet",value:function(e){if(this.properties.hasOwnProperty(e))return!0}},{key:"delete",value:function(e){delete this.properties[e]}},{key:"getProperties",value:function(e){var t={},n=function(){return!1};return e||"function"!=typeof e||(n=e),p(this.properties,(function(e,r){n(e)||(t[e]=r)})),t}},{key:"merge",value:function(t){var n=this,r=t;r instanceof e&&(r=t.getProperties()),p(r,(function(e,t){n.set(e,t)}))}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var H=function(e,t){if(void 0===e)return e;void 0===t&&(t=2);for(var n=String(e);n.length<t;)n="0"+n;return n},Q=function(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t},$=function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||void 0!==e)return!0===e||1===e||"string"==typeof e&&("true"===e.toLowerCase()||"1"===e)},J=function(e){var t=parseInt(e,10);if(!isNaN(t))return t},X=function(e){var t=parseFloat(e);if(!isNaN(t))return t};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Y(o)?o:String(o)),r)}var o}function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ee.apply(this,arguments)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}var re=function(e){try{return JSON.parse(e)}catch(e){return{}}};const oe=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ne(r);if(o){var n=ne(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._updateWindow(),t}return t=a,(n=[{key:"_updateWindow",value:function(){N("config",h(this.properties,!0))}},{key:"set",value:function(e,t){ee(ne(a.prototype),"set",this).call(this,e,t),this._updateWindow()}},{key:"merge",value:function(e){ee(ne(a.prototype),"merge",this).call(this,e),this._updateWindow()}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(z))({build:{env:"prod",date:"2024-02-13T20:17:35.978Z"},client:{name:"scc-gd-c1",version:"0.6.2"},cookie:{sameSite:"none"},site:{privateLabelId:""},sGtm:{enabled:$("true"),whitelist:re('{"privateLabelId":1}'),account:"G-QJXPZE4TX8",host:""},ga:{account:"UA-115508484-1"},wGtm:{enabled:$("true"),whitelist:re('{"privateLabelId":1}'),account:"GTM-5WB8X7D"},eventBus:{enabled:$("true"),sccApiKey:"b18ef4f046435b64a469b32c3c1c20a3",rigorApiKey:"8da2217409854bee82e12dc4ca0b39fb"},clickListener:{enabled:!0,navDelayMs:75},timing:{auto:!0},webVitals:{enabled:!0,url:"https://img1.wsimg.com/signals/js/clients/tti/tti.min.js"},consent:{delayMs:500}});var ie,ae=function(){return t=(e=new Date).getUTCFullYear()+"-"+H(e.getUTCMonth()+1),t+="-"+H(e.getUTCDate())+"T"+H(e.getUTCHours())+":",(t+=H(e.getUTCMinutes())+":"+H(e.getUTCSeconds())+".")+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";var e,t},ce=function(e){return"[object Array]"===Object.prototype.toString.call(e)},ue=function(e,t){ce(e)&&e.push({timestamp:ae(),data:t})},se={},fe={"first-paint":"fp","first-contentful-paint":"fcp"},le=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","navigationStart","requestStart","responseEnd","responseStart","loadEventStart","loadEventEnd"],pe=["transferSize","encodedBodySize","decodedBodySize"],de=function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r],i=e[o];void 0!==i&&(n[o]=Math.round(i))}return n},ye=function(e){return de(e,le)},ve=function(e){return de(e,pe)},me=function(e,t){var n=new z;"tcc"===e&&n.set("tccin",t||"na");try{(ie=_().performance)&&ie.timing?(function(e){if(e.merge(ye(ie.timing)),ie.getEntriesByName){var t=ie.getEntriesByName(w().location.href)[0];if(!t&&ie.getEntriesByType){var n=ie.getEntriesByType("navigation");t=n[n.length-1]}t&&(e.merge(ve(t)),e.set("navigationType",t.type))}}(n),"tcc"===e&&(function(e){if(ie.getEntriesByType){var t=ie.getEntriesByType("mark");if(ce(t)){e.set("marks",t.slice(0,10).map((function(e){return{name:e.name,startTime:Math.round(e.startTime)}})));var n=ie.getEntriesByType("measure");ce(n)&&e.set("measures",n.slice(0,10).map((function(e){return{name:e.name,duration:Math.round(e.duration)}})))}}}(n),function(e){if(ie.getEntriesByType){var t=ie.getEntriesByType("paint");t&&t.forEach((function(t){e.set(fe[t.name],Math.round(t.startTime))}))}}(n))):("tcc"===e&&n.set("tccperfapi","not supported"),q("Error loading performance lib"))}catch(e){q("_collect unable to get performance data",e)}return n.getProperties()},be=function(e,t,n){setTimeout((function(){_()._expDataLayer=_()._expDataLayer||[],_()._expDataLayer.push({schema:"add_perf",version:"v1",data:"tcc"===e?{type:"pageperf",properties:d(t,se,{nav_type:"hard"}),custom_properties:n}:{timing_object:d(t,se),is_hard_navigation:!0,custom_properties:n}})}),0)},he=function(){return!(ie=_().performance)||!ie.timing||ie.timing.loadEventStart>0},ge=!1,_e=function(e,t,n){if("manual"===t||!ge)if(ge=!0,he())be(e,me(e,t),n);else var r=oe.get("".concat(e,".perfDelayMs"))||250,o=setInterval((function(){he()&&(clearInterval(o),be(e,me(e,t),n))}),r)};function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===we(o)?o:String(o)),r)}var o}var je,Se=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._loaded=!1,this._onLoadFns=[],t?this._loaded=!0:n(this._triggerOnLoad.bind(this))}var t,n;return t=e,(n=[{key:"_executeFn",value:function(e){try{e()}catch(t){q("Exception while executing onLoad callback",e,t)}}},{key:"_triggerOnLoad",value:function(){this._loaded=!0;for(var e=0;e<this._onLoadFns.length;e++)this._executeFn(this._onLoadFns[e])}},{key:"registerOnLoadFn",value:function(e){(function(e){return e&&"[object Function]"==={}.toString.call(e)})(e)&&(this._loaded?this._executeFn(e):this._onLoadFns.push(e))}}])&&Oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Pe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=w().createElement("script");r.type="text/javascript",r.async=t,r.src=e,n&&r.addEventListener("load",n),(w().getElementsByTagName("head")[0]||w().getElementsByTagName("body")[0]).appendChild(r)},ke=_().Request,Ee=ke&&"keepalive"in new ke(""),xe=void 0!==O().sendBeacon,Ce=function(e,t,n,r,o,i,a){var c,u=d({},i),s=r?JSON.stringify(r):null;if("POST"===n&&(u["Content-Type"]="application/json"),xe&&!u.Authorization&&"POST"===n)try{var f=_().Blob;c=O().sendBeacon(e,new f([s],u))}catch(e){c=!1}c||function(e,t,n,r,o){var i=_().fetch;if(Ee&&i)try{i(e,{keepalive:!0,method:t,headers:r,body:n,credentials:o})}catch(e){}else!function(e,t,n,r){var o=_().XMLHttpRequest;if(o){var i=new o;i.open(t,e,!0),p(r,(function(e,t){i.setRequestHeader(e,t)})),i.send(n)}}(e,t,n,r)}(e,n,s,u,a),function(e,t,n,r,o){var i={endpoint:t,queryParams:n,method:r,payload:o};ue(M(e),i)}(o,e,t,n,r)},Te=function(e,t){var n=M("config")[e];if(n&&t)return n[t]},Ie=[{name:"EMAIL",regex:/[^@^=]+@[^@]+\.[^@^&]+/}],Re=function(e,t){if("string"!=typeof e)return e;for(var n=e,r=0;r<Ie.length;r++)for(var o=Ie[r].regex,i=n.match(o);i&&i[0];)i=(n=n.replace(i[0],"REDACTED")).match(o);return n},Le=function(e){return""===(e=e||_().location.search)?[]:(Q(e,"?")&&(e=e.substring(1)),e.split("&"))},De=function(e,t,n){for(var r=Le(n),o=r.length-1;o>=0;o--){var i=r[o].split("=");if(t){if((i[0]+"").toLowerCase()===(e+"").toLowerCase())return i[1]}else if(i[0]===e)return i[1]}},Ae=function(e){var t;Q(e,"?")&&(t=e.substring(1));var n=m(t,"&","=");return n.utm_content&&(e+="&ga_content="+n.utm_content),e},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://".concat(e?e+".":"").concat(function(){if(je)return je;var e=S();if("secureserver.net"===(e=function(e){var t=e||S();return t.indexOf("godaddy.com")>=0||t.indexOf("secureserver.net")>=0}(e)?e:"secureserver.net")){var t=Te("build","env");e="prod"===t?e:"".concat(t,"-").concat(e)}return je=e}())};function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Be(o)?o:String(o)),r)}var o}const Ve=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventQueue=[],this._sendBatchCallback=t,this._maxEvents=r,this._bindUnload(),this._processInterval=setInterval((function(){n._sendBatch()}),250)}var t,n;return t=e,(n=[{key:"_bindUnload",value:function(){var e=this,t=this.flush.bind(this),n=_().attachEvent,r=_().addEventListener,o=w().addEventListener;r?(r("beforeunload",t,!1),r("pagehide",t,!1)):n&&n("beforeunload",t),o&&o("visibilitychange",function(){"hidden"===w().visibilityState&&e.flush()}.bind(this))}},{key:"_sendRequests",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=Fe(e,2),r=n[0],o=n[1];try{var i=Fe(r.split("|"),2),a=i[0],c={schemaId:i[1],data:[]};Object.values(o).forEach((function(e){if(e.events.length>10)for(var t=e.events.length/10,n=0;n<t;n++)c.data.push(d(e,{events:e.events.slice(10*n,10*n+10)}));else c.data.push(e)})),t._sendBatchCallback(c,a)}catch(e){q("Failed to send request: ".concat(e))}}))}},{key:"pushEvent",value:function(e,t){t||!Ee&&!xe?this._sendBatch(e):this._eventQueue.push(e)}},{key:"_getRequestBatch",value:function(e,t,n){var r=n.apiKey,o=n.schemaId,i=n.global,a=n.contextVersion,c=n.businessContext,u="".concat(r,"|").concat(o),s=e[u]||{};e[u]=s;var f=0;c&&(t.push(c),f=t.length);var l="".concat(a,"|").concat(f);return{batch:s[l]||{global:i,businessContext:c,events:[]},batchKey:l,request:s}}},{key:"_processEvent",value:function(e,t,n){var r,o,i=this._getRequestBatch(e,t,n),a=i.batch,c=i.batchKey,u=i.request;return(r=a.events).push.apply(r,function(e){if(Array.isArray(e))return Ne(e)}(o=n.events.slice(0,this._maxEvents))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||Me(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.events.length>this._maxEvents&&this.pushEvent(d(n,{events:n.events.slice(this._maxEvents)})),u[c]=a,Math.min(n.events.length,this._maxEvents)}},{key:"_sendBatch",value:function(e){var t=0,n={},r=[];for(e&&(t+=this._processEvent(n,r,e));this._eventQueue.length>0&&t<this._maxEvents;)t+=this._processEvent(n,r,this._eventQueue.shift());this._sendRequests(n)}},{key:"flush",value:function(){for(;this._eventQueue.length>0;)this._sendBatch()}}])&&Ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Ge,Ke,We,ze,He="_eventBusSendLog",Qe=function(e,t){Ce("".concat(qe("csp"),"/eventbus"),null,"POST",e,He,{Authorization:"api-key ".concat(t)})},$e=function(e,t){var n=oe.get(e);if(n&&t)return n[t]},Je=function(e,t,n){var r=oe.get(e),o=r||{};r||oe.set(e,o),o[t]=n};function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ye,Ze,et=[],tt={},nt=0,rt=function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.startsWith("".concat(r,".")))return!1}}catch(e){n.e(e)}finally{n.f()}return!0},ot=function(e,t){"debug"===e&&L(t)},it=function(){var e,t,n=function(){for(var e={},t=0;t<We.length;t++){var n=We[t];p(n,(function(t,n){-1===Ze.indexOf(t.toLowerCase())&&(ot(t,n),rt(t)||(e[t]=n))}))}return e}();t={identity:{realm:(e=n)["".concat(Ke,".realm")]},site:{privateLabelId:e["".concat(Ke,".privateLabelId")]},timing:{auto:!$(e["".concat(Ke,".manualPagePerf")],!1)},page:{spa:e["".concat(Ke,".spa")],id:e["".concat(Ke,".pageId")],contentGroup:e["".concat(Ke,".gaContentGroup")]||e["".concat(Ke,".contentGroup")],referrerExclusion:e["".concat(Ke,".referrerExclusion")]},cookie:{sameSite:e["".concat(Ke,".cookies.sameSite")]},wGtm:{enabled:$(e["".concat(Ke,".webGtmEnabled")],!1)},clickListener:{enabled:!$(e["".concat(Ke,".listenerDisabled")],!1),navDelayMs:e["".concat(Ke,".eventDelayMs")]}},Object.keys(t).forEach((function(e){Object.keys(t[e]).forEach((function(n){var r=t[e][n];void 0!==r&&Je(e,n,r)}))})),oe.merge(n),ue(et,n)},at=function(){return d(tt)};const ct={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ut;const st=new Uint8Array(16);function ft(){if(!ut&&(ut="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ut))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ut(st)}const lt=[];for(let e=0;e<256;++e)lt.push((e+256).toString(16).slice(1));const pt=function(e,t,n){if(ct.randomUUID&&!t&&!e)return ct.randomUUID();const r=(e=e||{}).random||(e.rng||ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return lt[e[t+0]]+lt[e[t+1]]+lt[e[t+2]]+lt[e[t+3]]+"-"+lt[e[t+4]]+lt[e[t+5]]+"-"+lt[e[t+6]]+lt[e[t+7]]+"-"+lt[e[t+8]]+lt[e[t+9]]+"-"+lt[e[t+10]]+lt[e[t+11]]+lt[e[t+12]]+lt[e[t+13]]+lt[e[t+14]]+lt[e[t+15]]}(r)};var dt=function(){return pt()};function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==yt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===yt(o)?o:String(o)),r)}var o}var bt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataLayerNames=t,this.dataLayerLog=[],this.asyncCommands=[],this.loaded=!1,this.dataLayers=[],this.dataLayerNames.forEach((function(e){var t,r,o=_()[e];ce(o)&&(t=n.asyncCommands).push.apply(t,function(e){if(Array.isArray(e))return vt(e)}(r=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U(e,n),n.dataLayers.push(o)}))}var t,n;return t=e,(n=[{key:"start",value:function(){this.loadAsyncCommands()}},{key:"pushLog",value:function(e){ue(this.dataLayerLog,e)}},{key:"process",value:function(){}},{key:"push",value:function(e){this.loaded?this.process(e):this.asyncCommands.push(e)}},{key:"loadAsyncCommands",value:function(){for(;this.asyncCommands.length>0;)this.process(this.asyncCommands.shift());this.loaded=!0}}])&&mt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===gt(o)?o:String(o)),r)}var o}function Ot(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var jt=function(){function e(t,n){if(_t(this,e),!t)throw"Missing version definitions";this._versionedDefinitions=t,this._interfaceType=n}return Ot(e,[{key:"getInterface",value:function(e,t){var n=this._versionedDefinitions[t];if(n)return n}}]),e}(),St=function(){function e(t){if(_t(this,e),!t)throw"Missing type definitions";this._typeVersionDefinitionMap=t}return Ot(e,[{key:"getInterface",value:function(e,t,n){var r=this._typeVersionDefinitionMap[n];if(r)return r.getInterface(e,t)}}]),e}(),Pt={},kt=function(e){for(var t=function(){var e,t,o=(e=r[n],t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];if(ce(a)){var c={};a.forEach((function(e){var t={};Object.keys(e).forEach((function(n){"type"!==n&&(t[n]=e[n])})),c[e.type]=new jt(t,e.type)})),Pt[i]=new St(c)}else Pt[i]=new jt(a)},n=0,r=Object.entries(e);n<r.length;n++)t()},Et="string",xt="OPTIONAL",Ct="REQUIRED",Tt="CALCULATED",It="map";function Rt(){return Rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Rt.apply(this,arguments)}function Lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}function Dt(e,t){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dt(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Nt(o)?o:String(o)),r)}var o}function Mt(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}var Ut=function(e,t,n){var r;if(t._fieldType!==Tt){var o=e[t.name];"sub"===t._resolutionType&&(o=e),r=t.parse(o)}var i=Nt(t.transformFn);if("undefined"!==i){var a=ce(t.transformFn);if("function"===i||a)for(var c=a?t.transformFn:[t.transformFn],u=0;u<c.length;u++)r=c[u](r,n);else r=t.transformFn}return t._outputType&&t._outputType===Et&&(r=r.toString()),r},Vt=function(){function e(t){Bt(this,e),this.name=t,this.properties=[],this.definitionType="",this._outputType,this._resolutionType=It,this._fieldType=xt,this.outputKey,this.allowedValuesList=[]}return Mt(e,[{key:"parse",value:function(e){if(this.validate(e),this._fieldType!==xt||e){for(var t=new z,n=0;n<this.properties.length;n++){var r=this.properties[n],o=Ut(e,r,t.getProperties());r._resolutionType===It?t.set(r.outputKey||r.name,o):t.merge(o)}return t.getProperties()}}},{key:"validate",value:function(e){if(this._fieldType===Ct&&!e)throw"Missing required property '".concat(this.name,"'");if(this.allowedValuesList.length>0&&!this.allowedValuesList.includes(e))throw"Input '".concat(e,"' for property '").concat(this.name,"' is not one of the allowed values (").concat(this.allowedValuesList,").")}},{key:"optional",value:function(){return this._fieldType=xt,this}},{key:"required",value:function(){return this._fieldType=Ct,this}},{key:"load",value:function(){for(var e=0;e<this.properties.length;e++)this.properties[e].load()}},{key:"stringify",value:function(){for(var e=new z,t=0;t<this.properties.length;t++){var n=this.properties[t];e.merge(n.stringify())}return e.getProperties()}},{key:"clean",value:function(){for(var e=0;e<this.properties.length;e++)this.properties[e].clean();this.properties=[]}},{key:"transform",value:function(e){return this.transformFn=e,this}},{key:"transformKey",value:function(e){return this.outputKey=e,this}},{key:"allowedValues",value:function(e){return this.allowedValuesList=e,this}},{key:"outputType",value:function(e){return this._outputType=e,this}}]),e}(),Gt=function(e){Lt(n,e);var t=At(n);function n(e,r){var o;return Bt(this,n),(o=t.call(this,e)).definitionType="Schema",o.properties=r,o}return Mt(n,[{key:"parse",value:function(e){var t;if(this.properties&&this.properties.length>0)try{this.load(),t=Rt(qt(n.prototype),"parse",this).call(this,e||{}),this.clean()}catch(e){throw""}return Object.freeze(t)}}]),n}(Vt),Kt=function(e){Lt(n,e);var t=At(n);function n(e){return Bt(this,n),t.call(this,e)}return Mt(n,[{key:"parse",value:function(e){return this.validate(e),e}},{key:"stringify",value:function(){var e={};return e[this.name]=this._fieldType,e}}]),n}(Vt),Wt=function(e){Lt(n,e);var t=At(n);function n(){var e;return Bt(this,n),(e=t.call(this)).objDefinitions=[],e.definitionType="Object",e}return Mt(n,[{key:"load",value:function(){this.properties=this.properties.concat(this.objDefinitions),this.extraDefinitions&&(this.properties=this.properties.concat(this.extraDefinitions)),Rt(qt(n.prototype),"load",this).call(this)}},{key:"stringify",value:function(){if(this._resolutionType===It){var e={};return e["".concat(this.name," (").concat(this._fieldType,")")]=Rt(qt(n.prototype),"stringify",this).call(this),e}return Rt(qt(n.prototype),"stringify",this).call(this)}},{key:"substitute",value:function(e){return this.objDefinitions=e,this._resolutionType="sub",this}},{key:"map",value:function(e,t){return this.name=e,this.objDefinitions=t,this._resolutionType=It,this}},{key:"extend",value:function(e){return this.extraDefinitions=e,this}}]),n}(Vt),zt=function(e){Lt(n,e);var t=At(n);function n(){var e;return Bt(this,n),(e=t.call(this)).definitionType="Collection",e.minElements=0,e}return Mt(n,[{key:"parse",value:function(e){if(void 0!==e&&!ce(e))throw"";if(this.minElements&&(!e||e.length<this.minElements))throw"";var t=[];if(e)for(var r=0;r<e.length;r++)t.push(Rt(qt(n.prototype),"parse",this).call(this,e[r]));return t}},{key:"stringify",value:function(){if(this._resolutionType===It){var e={};e["".concat(this.minElements,"...n")]=Rt(qt(n.prototype),"stringify",this).call(this)["".concat(this.name," (").concat(this._fieldType,")")];var t={};return t["".concat(this.name," (").concat(this._fieldType,")")]=e,t}return Rt(qt(n.prototype),"stringify",this).call(this)}},{key:"withMinElements",value:function(e){return this.minElements=e,this._fieldType=e>0?Ct:xt,this}}]),n}(Wt),Ht=function(e){Lt(n,e);var t=At(n);function n(e){var r;return Bt(this,n),(r=t.call(this,e))._fieldType=Tt,r}return Mt(n)}(Vt),Qt=function(e,t,n,r,o){var i=function(e,t,n){var r=Pt[e];if(r)return r.getInterface(e,n,t)}(e,t,n),a=new Gt(e,i.properties).parse(r)||{},c=new i.handler(a,t,n,o);c.preProcess(a),c.process(a)};function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Jt(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==$t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===$t(o)?o:String(o)),r)}var o}function Zt(){return Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Zt.apply(this,arguments)}function en(e,t){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}var nn=["_expDataLayer","_signalsDataLayer"],rn=["add_virtual_page_view","set_config","subscribe"],on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tn(o);if(i){var n=tn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t,n=e.pageViewSchema,r=e.autoPageViewDisabled,o=e.beforeEvent,i=e.immediateSchemas,u=void 0===i?[]:i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,nn)).pageViewSchema=n,t.autoPageViewDisabled=r,t.beforeEvent=o,t.immediateSchemas=[rn].concat(Jt(u)),t._initEvents(),t}return t=c,(r=[{key:"push",value:function(e){return this.immediateSchemas.includes(e.schema)?this.process(e):Zt(tn(c.prototype),"push",this).call(this,e)}},{key:"_initEvents",value:function(){for(var e=!this.autoPageViewDisabled,t=this.asyncCommands.length-1;t>=0;t--){var n=this.asyncCommands[t];n.schema!==this.pageViewSchema||n.data&&n.data.virtual_path||(e=!1),"set_config"===n.schema&&this.process.apply(this,Jt(this.asyncCommands.splice(t,1)))}e&&this.process({schema:this.pageViewSchema})}},{key:"process",value:function(e){Zt(tn(c.prototype),"pushLog",this).call(this,e);try{var t=e.data,r=e.schema||e.interface,o=e.type,i=e.version||"v1",a={eventId:dt()};this.beforeEvent&&this.beforeEvent(),function(){for(;nt<We.length;){var e=We[nt];p(e,(function(e,t){-1===Ze.indexOf(e.toLowerCase())&&rt(e)&&(ot(e,t),tt[e]=t)})),nt++}}(),Qt(r,o,i,t,a)}catch(t){var u=["Unable to process",e,"\n\n"];q.apply(n,u.concat(t))}}}])&&Yt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(bt);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==an(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===an(o)?o:String(o)),r)}var o}function un(){return un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},un.apply(this,arguments)}function sn(e,t){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sn(e,t)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}var ln=["_trfq"],pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fn(r);if(o){var n=fn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,ln)).handlers=e,t.start(),t}return t=a,(n=[{key:"process",value:function(e){un(fn(a.prototype),"pushLog",this).call(this,e);try{var t=Array.prototype.slice.call(e,1),n=e[0];this.handlers[n]?this.handlers[n].apply(null,t):q("Invalid command sent to data layer",this.dataLayerName,e)}catch(t){q("Unable to process",e,t)}}}])&&cn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(bt);const dn=new z;var yn,vn,mn,bn,hn=function(e,t,n,r){var o=Te("cookie","sameSite")||"",i=new Date;i.setTime(i.getTime()+60*n*1e3),w().cookie="".concat(e,"=").concat(encodeURI(t),"; domain=").concat(S(),"; ")+(n?"expires=".concat(i.toGMTString(),"; "):"")+(r?"path=".concat(r,"; "):"")+(o?"SameSite=".concat(o,"; "):"")+("NONE"===o.toUpperCase()?" Secure;":"")},gn=function(e){var t=w().cookie;return vn!==t&&(mn=function(e){for(var t=e.split(";"),n=Object.create(null),r=0;r<t.length;r++){var o=/([^=]*)*=([\s\S]*)/.exec(t[r]);if(o&&o[2]){var i=o[1].trim(),a=decodeURIComponent(o[2].trim());n[i]=a}}return n}(t),vn=t),mn[e]},_n=function(e){var t=gn(e);return m(t,"&","=")},wn=function(){var e,t=w().querySelector("meta[name='gd:traceId']");return t&&(e=t.getAttribute("content")),e&&!oe.get("tcc.disablePageTracing")?{trace_id:e,traced:1}:{trace_id:dt().replace(/-/g,"")}},On=[function(){return De("isc",!0)},function(){return gn("isc")},function(){return at().isc}];function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],(o=Cn(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cn(r.key),r)}}function Cn(e){var t=function(e,t){if("object"!==jn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===jn(t)?t:String(t)}var Tn=function(){function e(t){var n=t.contextFnMap,r=t.paramsFnMap,o=void 0===r?{}:r,i=t.windowName;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._contextFnMap=n,this._paramsFnMap=o,this._windowName=i}var t,n;return t=e,(n=[{key:"init",value:function(e){var t=e.context,n=void 0===t?{}:t,r=e.contextFnMap,o=void 0===r?{}:r,i=e.paramsFnMap,a=void 0===i?{}:i;this.version=0,this.context=n,this._initialContext=En({},n),this._contextMap={},this._contextFnMap=d(this._contextFnMap,o),this._paramsFnMap=d(this._paramsFnMap,a)}},{key:"_buildContext",value:function(e){var t=En({},this._initialContext);return Object.entries(e).forEach((function(e){var n,r=Sn(e,2),o=r[0],i=r[1],a=o.split("."),c=t;a.forEach((function(e,t){t<a.length-1?(c[e]=c[e]||{},c=c[e]):n=e})),c[n]=i})),t}},{key:"updateContext",value:function(){var e=this;if(this._contextFnMap){var t=!1,n={},r={};Object.entries(this._paramsFnMap).forEach((function(e){var t=Sn(e,2),n=t[0],o=t[1];try{r[n]=o()}catch(e){q("Error executing paramsFnMap for key: ".concat(n),e)}})),Object.entries(this._contextFnMap).forEach((function(o){var i=Sn(o,2),a=i[0],c=(0,i[1])(r);e._contextMap[a]!==c&&(t=!0),void 0!==c&&(n[a]=c)})),t&&(this.version++,this.context=h(this._buildContext(n)),this._contextMap=n,this._windowName&&N(this._windowName,this.context))}}}])&&xn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const In=new Tn({});function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln={"godaddy.com":1,"mediatemple.net":4500,"afternic.com":497036},Dn=[function(){return $e("site","privateLabelId")},function(){return De("plid")},function(){var e=S().replace("dev-","").replace("test-","").replace("stg-","");if(Ln.hasOwnProperty(e))return Ln[e]}],An=function(){for(var e=0;e<Dn.length;e++){var t=Dn[e]();if(t&&/^-?\d+$/.test(t))return J(t)}};function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===qn(o)?o:String(o)),r)}var o}function Fn(){return Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fn.apply(this,arguments)}function Mn(e,t){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mn(e,t)}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}var Un={"client.userAgent":function(){return O().userAgent},"client.sdk.name":function(){return $e("client","name")},"client.sdk.version":function(){return $e("client","version")},"client.device.viewportWidth":function(e){var t=e.win,n=e.doc;return t.innerWidth?t.innerWidth:n.body.offsetWidth},"client.device.viewportHeight":function(e){var t=e.win,n=e.doc;return t.innerHeight?t.innerHeight:n.body.offsetHeight},"client.device.screenResolutionWidth":function(e){return e.win.screen.width},"client.device.screenResolutionHeight":function(e){return e.win.screen.height},"page.id":function(){return $e("page","id")},"page.traceId":function(){return dn.get("trace_id")},"page.contentGroup":function(){return function(){var e=$e("page","contentGroup");if("string"!=typeof e)return e;for(var t=e.split("/"),n=t.length-1;n>=0;n--)t[n]=t[n].trim(),t[n]||t.splice(n,1);if(t.length>0)for(;t.length<3;)t.push("Other");return t.join(" / ")}()},"page.host":function(){return j()},"page.path":function(e){return e.win.location.pathname},"page.virtualPath":function(){return dn.get("virtual_path")},"page.location":function(){return n=(e=Le()).length?(function(e){for(var t=0;t<e.length;t++){var n=e[t].split("="),r=!1,o=n[1];o!==decodeURIComponent(n[1])&&(o=decodeURIComponent(n[1]),r=!0);var i=Re(o);r&&(i=encodeURIComponent(i)),e[t]="".concat(n[0],"=").concat(i)}}(e),"?"+e.join("&")):"",(r=_().location)&&(t="".concat(r.protocol,"//").concat(r.hostname).concat(r.pathname)),n&&(t="".concat(t).concat(n)),t;var e,t,n,r},"page.referrer":function(e){return e.doc.referrer},"site.privateLabelId":function(){return An()}},Vn={win:_,doc:w};const Gn=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mn(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nn(r);if(o){var n=Nn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){var t=e.traceId,n=e.contextFnMap,r=e.paramsFnMap;Fn(Nn(a.prototype),"init",this).call(this,{context:{traceId:t},contextFnMap:n,paramsFnMap:r})}}])&&Bn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Tn))({contextFnMap:Un,paramsFnMap:Vn,windowName:"globalContext"});var Kn=["events"];function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zn={},Hn=["routing","webContext"],Qn=function(e,t,n){var r=t.callback;try{r(n)}catch(t){q("Failed to push datalayer event to subscriber (".concat(e,") callback"),t)}},$n=function(e,t,n){var r=t.schemaIds,o=function(e,t){t.events;var n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Kn),r=e.fields||[];return Hn.forEach((function(e){r.includes(e)||delete n[e]})),n}(t,n);t.batch?(o.events=r?n.events.filter((function(e){return r.includes(e.schemaId)})):n.events,o.events.length>0&&Qn(e,t,o)):n.events.forEach((function(n){r&&!r.includes(n.schemaId)||Qn(e,t,d(o,{event:n}))}))},Jn=[];function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Xn(o)?o:String(o)),r)}var o}var Zn=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t,this.interfaceType=n,this.interfaceVersion=r,this.internal=o}var t,n;return t=e,(n=[{key:"preProcess",value:function(e){}},{key:"process",value:function(e){}}])&&Yn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==er(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===er(o)?o:String(o)),r)}var o}function nr(e,t){return nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nr(e,t)}function rr(e){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rr(e)}var or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rr(r);if(o){var n=rr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){this._pushToQueue(e)}},{key:"_pushToQueue",value:function(e){if(!this.internal.hasFired){var t=this._getEvents(e);if(t&&0!==t.length){for(var n=ae(),r=0;r<t.length;r++)t[r].data=d({eventCreationTimestamp:n},t[r].data);var o=this._getGlobalSchemaId(),i=this._getBusinessContext();Gn.updateContext(),In.updateContext(),a={schemaId:o,global:Gn.context,businessContext:i,events:t,webContext:d(In.context,this._getWebContext(e)),routing:{eventBusApiKey:this._getApiKey(),globalContextVersion:Gn.version,hasConversion:this._hasConversion()}},h(a),Jn.push(a),function(e){for(var t=0,n=Object.entries(zn);t<n.length;t++){var r=(c=2,function(e){if(Array.isArray(e))return e}(a=n[t])||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(a,c)||function(e,t){if(e){if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,t):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];try{$n(o,i,e)}catch(e){q("Failed to push datalayer event batch to subscriber (".concat(o,")"),e)}}var a,c}(a),Jn.length>2e3&&Jn.shift(),this.internal.hasFired=!0}}var a}},{key:"_getSchemaId",value:function(){}},{key:"_getEvents",value:function(e){return[{schemaId:this._getSchemaId(),data:e}]}},{key:"_getGlobalSchemaId",value:function(){return An()?"urn:shared:user:events:/v2":"urn:shared:user:events:/v1"}},{key:"_getBusinessContext",value:function(){}},{key:"_getApiKey",value:function(){return $e("eventBus","sccApiKey")}},{key:"_hasConversion",value:function(){}},{key:"_getWebContext",value:function(e){}}])&&tr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn);function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ir(o)?o:String(o)),r)}var o}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}const sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ur(r);if(o){var n=ur(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getBusinessContext",value:function(){return this.input.businessContext}},{key:"_getEvents",value:function(){return this.input.events}},{key:"_getApiKey",value:function(){return this.input.apiKey}},{key:"_getGlobalSchemaId",value:function(){return this.input.schemaId}}])&&ar(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);var fr="urn:shared:user:event:/data-platform/signals/click/v1",lr="urn:shared:user:event:/data-platform/signals/impression/v1",pr="urn:shared:user:event:/data-platform/signals/element-action/v1",dr="urn:shared:user:event:/data-platform/signals/traffic-event/v1",yr="urn:shared:user:event:/data-platform/signals/page-view/v1",vr="urn:shared:user:event:/data-platform/signals/ecommerce/add-to-cart/v1",mr="urn:shared:user:event:/data-platform/signals/ecommerce/checkout-progress/v1",br="urn:shared:user:event:/data-platform/signals/ecommerce/remove-from-cart/v1",hr="urn:shared:user:event:/data-platform/signals/ecommerce/transaction/v2",gr="urn:shared:user:event:/data-platform/signals/experiment-assignment/v1",_r="urn:shared:user:event:/rigor/page-navigation/v1",wr="urn:shared:user:event:/rigor/page-navigation-delayed/v1",Or="urn:shared:user:event:/data-platform/signals/conversion/v1",jr=[vr,mr,br,hr],Sr=/[^a-z0-9\_\/\.\-]/g,Pr=/^([a-z0-9_\-]+)\.([a-z0-9_\-]+)\.(([a-z0-9_\/\-]+)\.)?([a-z0-9_\/\-]+)\.([a-z0-9_\-]+)\.([a-z0-9_\-]+)$/g,kr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eid,n=e.customProperties,r=e.eventCategory;return d({pageLevelProperties:at(),identityRealm:$e("identity","realm")},t&&{eid:t},n&&{customProperties:n},r&&{eventCategory:r})},Er=function(e,t,n,r){var o={traffic:kr({eid:t,customProperties:r}),producerEventId:e};if(t){var i=function(e){return e.split(".")}(t),a=function(e){return e[e.length-1]}(i);(function(e){return!!(e.match(Pr)&&e.length<=500)})(t)&&function(e,t,n){return t===n&&e.length>=5&&e.length<=6}(i,a,n)&&(o.element=function(e,t){var n=6===e.length?1:0,r={area:e[0],product:e[1],section:e[2+n],widget:e[3+n]};return["impression","click"].includes(t)||(r.action=t),r}(i,a))}return o},xr=function(e,t,n,r){null!=r&&null!=n&&0!==r&&0!==n&&n>r&&(e[t]=Math.round(n-r))},Cr=function(e,t,n,r){var o=ye(t);!function(e,t){xr(e,"pageLoadTime",t.loadEventStart,t.navigationStart),xr(e,"domContentLoadedTime",t.domContentLoadedEventStart,t.navigationStart),xr(e,"domInteractiveTime",t.domInteractive,t.navigationStart),xr(e,"pageDownloadTime",t.responseEnd,t.responseStart),xr(e,"domainLookupTime",t.domainLookupEnd,t.domainLookupStart),xr(e,"serverResponseTime",t.responseStart,t.requestStart),xr(e,"serverConnectionTime",t.connectEnd,t.connectStart),xr(e,"redirectionTime",t.fetchStart,t.navigationStart)}(o,t);var i={navigationType:t.navigationType,timing:{navigation:o},traffic:kr({customProperties:n}),producerEventId:e,contentLoadType:r};return"hard"===r&&(i.response=ve(t),i.timing.marks=t.marks,i.timing.measures=t.measures,i.timing.paint={firstPaint:t.fp,firstContentfulPaint:t.fcp,largestContentfulPaint:t.lcp}),i},Tr=function(e,t){return{timing:{paint:{largestContentfulPaint:t.LCP},vitals:{cumulativeLayoutShift:t.CLS,firstInputDelay:t.FID,timeToInteractive:t.timeToInteractive}},traffic:kr(),producerEventId:e}};function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ir(o)?o:String(o)),r)}var o}function Lr(e,t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lr(e,t)}function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}const Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dr(r);if(o){var n=Dr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,n=[{key:"_getSchemaId",value:function(){return pr}},{key:"_getActionType",value:function(e){return e.element.action}},{key:"_getEvents",value:function(e,t){var n=e.traffic||{};return n.eid=this._buildLegacyEid(this._getActionType(e),e.element,n.eid),[{schemaId:this._getSchemaId(),data:d(e,{producerEventId:t||this.internal.eventId,element:e.element,traffic:kr(n)})}]}},{key:"_buildLegacyEid",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(t.area,".").concat(t.product,".").concat(t.section,".").concat(t.widget,".").concat(e)}},{key:"_transformLegacyPromo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.eid,o=n.customProperties,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{id:i.id,name:i.name,creative_name:i.creative,creative_slot:i.position,type:e,properties:o,eid:this._buildLegacyEid(e,t,r)}}},{key:"_isPromo",value:function(e){return e.promotion&&Object.keys(e.promotion).length>0}}],n&&Rr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===qr(o)?o:String(o)),r)}var o}function Fr(e,t){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fr(e,t)}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}const Nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mr(r);if(o){var n=Mr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getSchemaId",value:function(){return fr}},{key:"_getActionType",value:function(){return"click"}}])&&Br(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ur(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ur(o)?o:String(o)),r)}var o}function Kr(){return Kr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Kr.apply(this,arguments)}function Wr(e,t){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wr(e,t)}function zr(e){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zr(e)}const Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zr(r);if(o){var n=zr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getSchemaId",value:function(){return lr}},{key:"_getActionType",value:function(){return"impression"}},{key:"_getEvents",value:function(e){var t=this,n=[];return e.impressions.forEach((function(e){var r;n.push.apply(n,function(e){if(Array.isArray(e))return Vr(e)}(r=Kr(zr(a.prototype),"_getEvents",t).call(t,e,dt()))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),n}}])&&Gr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar);function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Qr(o)?o:String(o)),r)}var o}function Jr(e,t){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jr(e,t)}function Xr(e){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xr(e)}var Yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xr(r);if(o){var n=Xr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){y(e.config),p(e.config,(function(t,n){if(!e.overwrite){var r=oe.get(t);ce(r)?n=[].concat(r,n):"object"===Qr(r)&&(n=d(r,n))}oe.set(t,n)}))}}])&&$r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Zr(o)?o:String(o)),r)}var o}function to(e,t){return to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},to(e,t)}function no(e){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},no(e)}var ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&to(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=no(r);if(o){var n=no(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){var t,n,r;t=e.name,n={callback:e.callback,schemaIds:e.schemaIds,batch:e.batch,fields:e.fields},(r=[].concat(Jn)).length>=2e3&&B("".concat(t," subscribed to SCC after the eventQueue was full. Some events may have been lost.")),r.forEach((function(e){return $n(t,n,e)})),zn[t]=n}}])&&eo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn);function oo(e){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oo(e)}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==oo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===oo(o)?o:String(o)),r)}var o}function ao(){return ao="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ao.apply(this,arguments)}function co(e,t){return co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},co(e,t)}function uo(e){return uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uo(e)}var so,fo,lo=function(e){var t={};if(ce(e))for(var n=0;n<e.length;n++){var r=e[n];ce(r)&&(t[r[0]]=v(r))}return t},po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&co(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uo(r);if(o){var n=uo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"setTDataString",value:function(e){ao(uo(a.prototype),"merge",this).call(this,function(e){return m(e,"^",",")}(e))}},{key:"stringify",value:function(){var e,t=y(this.getProperties());(e=t)&&p(e,(function(t,n){var r=(t+"").split(".").join("_");delete e[t],e[r]=n}));var n=b(t,"^",",");if(n)return n}},{key:"set",value:function(e,t){"object"!==oo(t)&&"[object Function]"!=={}.toString.call(t)?ao(uo(a.prototype),"set",this).call(this,e,t):q("Invalid key/value pair found in Traffic's custom properties (tData). Objects, arrays, and functions are not supported.\n\nKey: '".concat(e,"' Value: '").concat(t,"' Type: '").concat(oo(t),"'."))}}])&&io(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(z),yo=function(e){var t=new po;return t.merge(e.custom_properties),e.traffic&&t.merge(e.traffic.customProperties),t},vo=function(e,t){var n=e.eid||t&&t();if(!n)throw"";if(e.eid=n.toLowerCase(),function(e){return e.match(Sr)}(e.eid))throw e.eid,"";return e},mo=function(e){var t=e.traffic;return t&&vo(t),e},bo=function(){return Math.floor(2147483647*Math.random())};function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ho(o)?o:String(o)),r)}var o}function _o(e,t){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_o(e,t)}function wo(e){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wo(e)}var Oo=0,jo=function(){var e=oe.get("components");if(fo!==e)return fo=e},So=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_o(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wo(r);if(o){var n=wo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getWebContext",value:function(){return{pageViewCount:Oo}}},{key:"_getEvents",value:function(e){var t=yo(e);return[{schemaId:yr,data:{forensics:{traceIdAdopted:$(dn.get("traced")),components:jo()},traffic:kr({customProperties:t.getProperties()}),producerEventId:this.internal.eventId}}]}},{key:"preProcess",value:function(e){var t=e.path||e.virtual_path||e.virtualPath,n=void 0!==t;if(n||(t=_().location.pathname),so===t)throw"cmd: LogPageRequest duplicate page request detected, ignoring duplicate path";so=t,dn.set("corrid",bo()),n&&(it(),dn.set("virtual_path",t)),yn.incrementPageCount(),Oo+=1,dn.get("trace_id")||dn.merge(wn())}}])&&go(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or),Po=function(e){return[(new Wt).map("element",[new Kt("area").required(),new Kt("product").required(),new Kt("section").required(),new Kt("widget").required()]).required().extend(e)]},ko=function(e){return[(new Wt).map("traffic",[new Kt("customProperties")]).extend(e)]},Eo=function(){return[(new Wt).substitute(ko([new Kt("eid")]))]},xo=function(){return[(new Wt).substitute(Po()),(new Wt).substitute(Eo()),(new Wt).map("promotion",[new Kt("id").required(),new Kt("name"),new Kt("creative"),new Kt("position")]),(new Wt).map("product",[new Kt("actionCode").required().allowedValues(["add_to_cart","product_detail"]),(new Wt).map("basket",[new Kt("couponCode"),new Kt("currencyCode"),new Kt("itemTrackingCode")]),(new zt).map("products",[new Kt("productId").required(),new Kt("productName"),new Kt("productInstanceId"),new Kt("priceUsd"),new Kt("quantity").required(),new Kt("couponCode"),new Kt("itemTrackingCode")]).required(),(new zt).map("packages",[new Kt("id"),new Kt("priceUsd"),new Kt("quantity"),new Kt("category")])])]};const Co={add_click:{v1:{handler:Nr,properties:[(new Wt).substitute(xo()).transform(mo)]}},add_element_action:{v1:{handler:Ar,properties:[(new Wt).substitute([(new Wt).substitute(Po([new Kt("action").required().allowedValues(["blur","drag","focus","hover","load","scroll"])])),(new Wt).substitute(Eo())]).transform(mo)]}},add_impressions:{v1:{handler:Hr,properties:[(new zt).map("impressions",[(new Wt).substitute(xo()).transform(mo)]).withMinElements(1)]}},add_virtual_page_view:{v1:{handler:So,properties:[new Kt("virtualPath").required(),(new Wt).substitute(ko())]}},add_micro_events:{v1:{handler:sr,properties:[new Kt("apiKey").required(),new Kt("schemaId").required(),(new zt).map("events",[new Kt("schemaId").required(),new Kt("data").required()]).withMinElements(1),(new Wt).map("businessContext",[new Kt("schemaId").required(),new Kt("data").required()])]}},subscribe:{v1:{handler:ro,properties:[new Kt("name").required(),new Kt("callback").required(),new Kt("schemaIds"),new Kt("fields"),new Kt("batch")]}},set_config:{v1:{handler:Yr,properties:[(new Wt).map("config",[(new zt).map("components",[new Kt("name").required(),new Kt("version").required().outputType(Et)]),(new Wt).map("cookie",[new Kt("sameSite")]),(new Wt).map("page",[new Kt("spa"),new Kt("id"),new Kt("contentGroup"),new Kt("referrerExclusion")]),(new Wt).map("identity",[new Kt("realm")]),(new Wt).map("site",[new Kt("privateLabelId")]),(new Wt).map("timing",[new Kt("auto")])]).required(),new Kt("overwrite")]}}};function To(e){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(e)}function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!==To(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==To(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===To(t)?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lo=!1,Do=function(e){var t=e.trfqMethods,n=e.legacyName,r=e.dataLayerConfig,o=e.globalContextConfig,i=e.hooks,a=i.onLoad,c=i.beforeLoad,u=i.beforeEvent,s=i.getEnvironment;if(!Lo){Lo=!0,Je("build","env",s&&s()||$e("build","env")),dn.merge(wn()),Gn.init(Ro({traceId:dn.get("trace_id")},o)),kt(Co),function(){var e=_();if(e.PerformanceObserver){var t=new e.PerformanceObserver((function(e){var t=e.getEntries(),n=t[t.length-1];n.renderTime&&(se.lcp=Math.round(n.startTime))}));try{t.observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}}}();var f=new Se("complete"===w().readyState,(function(e){_().addEventListener("load",e)}));yn.getSession(),c&&c();var l=new on(Ro({autoPageViewDisabled:oe.get("".concat(n,".manualPageRequest")),beforeEvent:u},r));f.registerOnLoadFn((function(){a&&a(),l.start(),new pn(t),$e("timing","auto")&&_e(n,"auto"),$e("eventBus","enabled")&&(N(He,[]),Ge=new Ve(Qe),_()._signalsDataLayer=_()._signalsDataLayer||[],_()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-bus",batch:!0,fields:["routing"],callback:function(e){var t=e.schemaId,n=e.global,r=e.businessContext,o=e.events,i=e.routing,a=i.eventBusApiKey,c=i.hasConversion,u=i.globalContextVersion;Ge.pushEvent({apiKey:a,businessContext:r,contextVersion:u,schemaId:t,global:n,events:o},c)}}}))})),A("SCC STARTED",oe.getProperties())}};const Ao=function(e){var t=e.legacyName,n=e.configManagerProps,r=e.hooks.beforeInit;!function(o){try{var i,a=w().cookie;Object.defineProperty(document,"cookie",{get:function(){return a},set:function(e){(i=i||Object.getOwnPropertyDescriptor(Document.prototype,"cookie")).set.call(document,e),a=i.get.call(document)},configurable:!0,enumerable:!0}),function(){if(a=O().userAgent.toLowerCase(),!/msie [1-8]\./.test(a))if(i="_".concat(t,"Internal"),l=i,void 0!==_()[l]||(_()[l]={},0))q("SCC Library has already been loaded on page");else if(function(e){var t=e.dataLayerName,n=e.clientConfigPrefixes,r=e.ignoredProperties,o=e.legacyName;Ke=o,Ze=r||[],ze=t,Ye=n,We=_()[ze]||[],U(ze,We),N("".concat(ze,"Log"),et),it()}(n),r&&r(),"off"!==oe.get("".concat(t,".status"))){var o=w();"prerender"!==o.visibilityState?Do(e):o.addEventListener("visibilitychange",(function(){"prerender"!==o.visibilityState&&"unloaded"!==o.visibilityState&&Do(e)}))}var i,a}()}finally{delete w().cookie}}()};function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fo(r.key),r)}}function Fo(e){var t=function(e,t){if("object"!==qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===qo(t)?t:String(t)}function Mo(e){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ko(r.key),r)}}function Uo(e,t){return Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uo(e,t)}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Go(e){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Go(e)}function Ko(e){var t=function(e,t){if("object"!==Mo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Mo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Mo(t)?t:String(t)}var Wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uo(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Go(r);if(o){var n=Go(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vo(e)}(this,e)});function a(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return t=Vo(e=i.call.apply(i,[this].concat(c))),r="fb_sessiontraffic",(n=Ko(n="_sessionCookieName"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=a,(n=[{key:"getSession",value:function(){var e=function(e,t){var n=_n("visitor");if(n.hasOwnProperty("vid"))return n.vid}(),t=_n(this._sessionCookieName),n=t.pathway,r=J(t.pc)||0;if(void 0===n){n=dt(),r=0;var o=ae(),i={C_TOUCH:o,pathway:n,V_DATE:o,pc:r};hn("pathway",n,20,"/"),this.saveSessionCookie(i)}if(void 0===e){var a="vid=".concat(e=n);hn("visitor",a,525600,"/")}return{visitorGuid:e,visitGuid:n,pageCount:r}}}])&&No(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=void 0,(n=Fo(n="_sessionCookieName"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n;return t=e,(n=[{key:"getSession",value:function(){}},{key:"saveSessionCookie",value:function(e){var t=b(e,"&","=");hn(this._sessionCookieName,t,20,"/")}},{key:"incrementPageCount",value:function(){var e=_n(this._sessionCookieName),t=J(e.pc)||0;e.pc=t+1,e.C_TOUCH=ae(),this.saveSessionCookie(e)}}])&&Bo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());function zo(e){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(e)}function Ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==zo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===zo(o)?o:String(o)),r)}var o}function Qo(e,t){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qo(e,t)}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$o(e)}var Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qo(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$o(r);if(o){var n=$o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){_e("tcc","manual",e.custom_properties)}}])&&Ho(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn),Xo="traffic.tcc.instrumentation.navigation.timing";function Yo(e){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Yo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Yo(o)?o:String(o)),r)}var o}function ei(e,t){return ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ei(e,t)}function ti(e){return ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ti(e)}var ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ei(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ti(r);if(o){var n=ti(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getApiKey",value:function(){return $e("eventBus","rigorApiKey")}},{key:"_getWebContext",value:function(e){var t=e.properties;if(t)return{virtualPath:t.virtual_path,page:t.page}}},{key:"_getEvents",value:function(e){var t=e.properties;if(t){if(t.navigationStart)return[{schemaId:_r,data:Cr(this.internal.eventId,t,e.custom_properties,t.nav_type)}];if(t.timeToInteractive)return[{schemaId:wr,data:Tr(this.internal.eventId,t)}]}if(e.custom_properties)return[{schemaId:dr,data:{traffic:kr({customProperties:e.custom_properties,eid:Xo,eventCategory:e.type}),producerEventId:this.internal.eventId}}]}}])&&Zo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ri(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ri(o)?o:String(o)),r)}var o}function ii(e,t){return ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ii(e,t)}function ai(e){return ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ai(e)}const ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ai(r);if(o){var n=ai(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getWebContext",value:function(e){return{eventLabel:e.event_label||this.customProperties.getProperties().event_label,tms:e.tms,href:e.href,tcode:e.tcode,ci:e.ci}}},{key:"preProcess",value:function(e){this.customProperties=yo(e),this.customProperties.merge(e.properties)}},{key:"_getEvents",value:function(e){var t=e.eid,n=e.type.toLowerCase(),r=function(e){return"click"===e?fr:"impression"===e?lr:["blur","drag","focus","hover","load","scroll"].includes(e)?pr:dr}(n),o=this.customProperties.getProperties();return[{schemaId:r,data:r!==dr?Er(this.internal.eventId,t,n,o):{traffic:kr({customProperties:o,eid:t,eventCategory:n}),producerEventId:this.internal.eventId}}]}}])&&oi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or),ui=new z,si=new z;function fi(e){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(e)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==fi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===fi(o)?o:String(o)),r)}var o}function pi(e,t){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pi(e,t)}function di(e){return di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},di(e)}var yi=["ineligible","inelligible"],vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pi(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=di(r);if(o){var n=di(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===fi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getWebContext",value:function(e){return{experimentType:this.interfaceType||e.experiment_type,contentId:e.content_id}}},{key:"_getEvents",value:function(e){for(var t=0,n=yi;t<n.length;t++){var r=n[t];if(e.variant_id.toLowerCase().includes(r))return}return si.set(e.experiment_id,e.variant_id),ui.set("experiments",si.getProperties()),[{schemaId:gr,data:{experimentId:e.experiment_id,experimentSource:e.experiment_source,variantId:e.variant_id,traffic:kr({customProperties:e.custom_properties}),producerEventId:this.internal.eventId}}]}}])&&li(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==mi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===mi(o)?o:String(o)),r)}var o}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function gi(e){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gi(e)}const _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gi(r);if(o){var n=gi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_addCspEvent",value:function(e,t,n,r,o){var i=o.id,a=o.eid,c=o.name,u=o.creative_name,s=o.creative_slot,f=o.dom_element,l=o.dom_event;a=a||I(f,l).e_id;var p=Er(e,a,n,r);t.push({schemaId:"urn:shared:user:event:/data-platform/signals/".concat(n,"/v1"),data:d(p,{promotion:{id:i,name:c,creative:u,position:s}})})}},{key:"_getEvents",value:function(e){var t=this,n=[],r=this.interfaceType,o=yo(e).getProperties();return e.hasOwnProperty("promotions")?e.promotions.map((function(e){t._addCspEvent(dt(),n,r,o,e)})):this._addCspEvent(this.internal.eventId,n,r,o,e),n}}])&&bi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==wi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===wi(o)?o:String(o)),r)}var o}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}function Si(e){return Si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Si(e)}var Pi=!1,ki=["cartEditProduct","cartEditProductIdBefore","cartEditProductIdAfter","cartEditQtyBefore","cartEditQtyAfter","cart_payment_reason_response_code","cart_payment_billing_country","cart_payment_error_code"],Ei=function(e){return{editFlag:$(e.cartEditProduct),beforePfid:e.cartEditProductIdBefore,afterPfid:e.cartEditProductIdAfter,beforeQuantity:J(e.cartEditQtyBefore),afterQuantity:J(e.cartEditQtyAfter)}},xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Si(r);if(o){var n=Si(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,n=[{key:"preProcess",value:function(){if("purchase"===this.interfaceType){if(Pi)throw"cmd: LogEcommEvent duplicate purchase event detected, ignoring duplicate";Pi=!0}}},{key:"_hasConversion",value:function(){return"purchase"===this.interfaceType}},{key:"_getWebContext",value:function(e){var t=this,n=[];e.items&&e.items.forEach((function(e){var r={fullProductName:e.full_product_name,productCategoryId:e.product_category_id,category:e.category,brand:e.brand,variant:e.variant};"purchase"===t.interfaceType&&(r.cjProductId=e.cj_product_id,r.cjProductPriceUsd=X(e.cj_product_price_usd),r.cjProductQuantity=J(e.cj_product_quantity),r.originalCurrencySubtotal=X(e.original_currency_subtotal)),n.push(r)}));var r={products:n};return"purchase"===this.interfaceType?(r.orderRegion=e.order_region,r.pageType=e.page_type,r.hashedEmail=e.hashed_email,r.originalCurrency=e.original_currency):(r.eventLabel=e.eid_label||e.el,"add_to_cart"!==this.interfaceType&&"remove_from_cart"!==this.interfaceType||(r.valueUsd=X(e.value))),r}},{key:"_getEvents",value:function(e){var t=yo(e),n=[];e.items&&e.items.forEach((function(e){n.push({productId:e.id,priceUsd:X(e.price),productName:e.name,quantity:J(e.quantity),couponCode:e.coupon,itemTrackingCode:e.item_tracking_code})}));var r=[];e.pkgs&&e.pkgs.forEach((function(e){r.push({id:e.pkgid,priceUsd:X(e.pkgpr),quantity:J(e.pkgqt),category:e.pkgca})}));var o={currencyCode:e.currency},i={type:e.cart_type},a=t.getProperties(),c=d(a);ki.forEach((function(e){delete c[e]}));var u=kr({customProperties:c}),s=this.internal.eventId;switch(this.interfaceType){case"add_to_cart":return[{schemaId:vr,data:{cart:d(i,Ei(a)),basket:o,packages:r,products:n,traffic:u,producerEventId:s}}];case"begin_checkout":case"checkout_progress":return[{schemaId:mr,data:{cart:i,basket:d(o,{couponCode:e.coupon}),checkout:{option:e.checkout_option,step:J(e.checkout_step)},payment:{processor:e.payment_processor,reasonResponseCode:a.cart_payment_reason_response_code,billingCountry:a.cart_payment_billing_country,errorCode:a.cart_payment_error_code},products:n,traffic:u,producerEventId:s}}];case"remove_from_cart":return[{schemaId:br,data:{cart:d(i,Ei(a)),basket:o,packages:r,products:n,traffic:u,producerEventId:s}}];case"purchase":return[{schemaId:hr,data:{cart:d(i,{activationRedirectFlag:$(e.activation_redirect)}),basket:d(o,{couponCode:e.coupon}),order:{discountUsd:X(e.order_discount_usd),fromWebsiteFlag:$(e.order_from_website),totalNewUsd:X(e.order_total_new_usd),totalRenewalUsd:X(e.order_total_renewal_usd),valueUsd:X(e.value),firstOrderFlag:$(e.first_order),newCustomerFlag:$(e.new_customer),newVsRenewal:e.new_vs_renewal,transactionId:e.transaction_id},payment:{processor:e.payment_processor,pendingFlag:$(e.payment_pending)},products:n,traffic:u,producerEventId:s}}]}}}],n&&Oi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function Ci(e){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ci(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ci(o)?o:String(o)),r)}var o}function Ii(e,t){return Ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ii(e,t)}function Ri(e){return Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ri(e)}var Li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ii(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ri(r);if(o){var n=Ri(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){var t="v1"===this.interfaceVersion?"v1":"v2";Qt("add_event",void 0,t,d(e,{type:"impression"}),this.internal)}}])&&Ti(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn);function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Di(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Di(o)?o:String(o)),r)}var o}function qi(e,t){return qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qi(e,t)}function Bi(e){return Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bi(e)}var Fi,Mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qi(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bi(r);if(o){var n=Bi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){var t=e.timing_metrics,n=e.virtual_path;"v2"===this.interfaceVersion&&(t=e.timing.navigation),Qt("add_perf",void 0,"v1",{type:"pageperf",properties:d(t,{nav_type:"soft",navigationType:e.type,page:n,virtual_path:n}),custom_properties:e.custom_properties},this.internal);var r=_();e.perf_mark_name&&r.performance&&r.performance.mark&&r.performance.mark(e.perf_mark_name)}}])&&Ai(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn),Ni=function(){var e=gn("_ga");if(e){var t=e.split(".");if(4===t.length)return"".concat(t[2],".").concat(t[3]);if(3===t.length)return"".concat(t[1],".").concat(t[2]);q("GA cookie malformed: ".concat(e))}};function Ui(e){if(Fi)return Fi;e&&e.startsWith("G-")&&(e=e.replace("G-",""));var t=gn("_ga_".concat(e));if(t){var n=t.split(".");if(n.length>3)return Fi={gaSessionId:n[2],gaSessionNumber:parseInt(n[3],10)}}}function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Vi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Vi(o)?o:String(o)),r)}var o}function Ki(e,t){return Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ki(e,t)}function Wi(e){return Wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wi(e)}var zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ki(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wi(r);if(o){var n=Wi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"process",value:function(e){var t={},n=(new Wo).getSession();t.vg=n.visitGuid,t.vtg=n.visitorGuid,t.corrid=dn.get("corrid"),t.experiments=si.getProperties(),t.gauid=Ni(),t.traceid=dn.get("trace_id"),"function"==typeof e.callback&&e.callback(t)}}])&&Gi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn);function Hi(e){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Hi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Hi(o)?o:String(o)),r)}var o}function $i(e,t){return $i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$i(e,t)}function Ji(e){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ji(e)}var Xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$i(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ji(r);if(o){var n=Ji(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"_getEvents",value:function(e){var t=e.properties||{};return[{schemaId:Or,data:{virtualOrderId:t.virtual_order_id,packageId:t.package_id,packageCategory:t.package_category,conversion:{area:e.area,revenue:e.revenue,product:e.product,action:e.action},traffic:kr({customProperties:e.custom_properties}),producerEventId:this.internal.eventId}}]}},{key:"_hasConversion",value:function(){return!0}}])&&Qi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(or);function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Yi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Yi(o)?o:String(o)),r)}var o}function ea(e,t){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ea(e,t)}function ta(e){return ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ta(e)}var na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ea(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ta(r);if(o){var n=ta(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,n=[{key:"process",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.callback("control")}))}],n&&Zi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zn),ra=function(e){return e.length>10?e.substr(0,10):e},oa=function(e){return vo(e,(function(){return I(e.dom_element,e.dom_event).e_id}))},ia=function(){return[new Kt("custom_properties")]},aa=function(){return[new Kt("experiment_id").required(),new Kt("variant_id").required(),new Kt("content_id"),new Kt("experiment_source"),(new Wt).substitute(ia())]},ca=function(){return[new Kt("eid").required(),new Kt("href"),new Kt("tcode"),new Kt("tms"),new Kt("ci"),new Kt("properties")]},ua=function(){return[new Kt("dom_element"),new Kt("dom_event"),new Kt("eid"),new Kt("properties")]},sa=function(e){return[new Kt("id").required(),new Kt("name").optional(),new Kt("creative_name").optional(),new Kt("creative_slot").optional(),(new Wt).substitute(e)]},fa=function(){return new Kt("cart_type").optional()},la=function(e){return[fa(),new Kt("currency"),new Kt("coupon"),(new zt).map("items",[new Kt("id").required(),new Kt("quantity").required(),new Kt("name"),new Kt("brand"),new Kt("variant"),new Kt("coupon"),new Kt("price")]).extend([new Kt("full_product_name"),new Kt("cj_product_id"),new Kt("cj_product_price_usd"),new Kt("cj_product_quantity"),new Kt("item_tracking_code"),new Kt("product_category_id"),new Kt("category")].concat(e)).withMinElements(1)]},pa=function(){return[(new Wt).substitute(la([new Kt("price").optional()])).extend([new Kt("checkout_step").required(),new Kt("checkout_option").optional(),new Kt("eid_label").optional()])]},da=function(){return[new Kt("el"),new Kt("currency"),new Kt("value"),(new Wt).substitute([(new zt).map("items",[new Kt("id").required(),new Kt("qt").required().transformKey("quantity"),new Kt("ca").transformKey("category"),new Kt("br").transformKey("brand"),new Kt("va").transformKey("variant"),new Kt("cc").transformKey("coupon"),new Kt("pr").transformKey("price")]).extend([new Kt("name"),new Kt("itc").transformKey("item_tracking_code")]).withMinElements(1)]),(new Wt).substitute([(new zt).map("pkgs",[new Kt("pkgid"),new Kt("pkgpr"),new Kt("pkgca"),new Kt("pkgqt")])]),(new Wt).substitute(ia()),fa()]},ya=function(){return[new Kt("experiment_id").required(),new Kt("callback").required(),new Kt("attributes"),(new Wt).substitute(ia())]},va=function(){return{handler:vi,properties:[(new Wt).substitute(aa())]}},ma=function(e){return{handler:_i,properties:[(new Wt).substitute(sa(e)),(new Wt).substitute(ia())]}},ba=function(e){return{handler:_i,properties:[(new zt).map("impressions",sa(e)).transformKey("promotions").withMinElements(1),(new Wt).substitute(ia())]}},ha=function(e){return{handler:ci,properties:[new Kt("type").required().transform(ra),(new Wt).substitute(e).transform(oa),new Kt("event_label"),(new Wt).substitute(ia())]}},ga=function(e){return{handler:Li,properties:[(new Wt).substitute(e).transform(oa),(new Wt).substitute(ia())]}},_a=function(){return[new Kt("navigationStart").required(),new Kt("fetchStart"),new Kt("domainLookupStart"),new Kt("domainLookupEnd"),new Kt("connectStart"),new Kt("connectEnd"),new Kt("requestStart"),new Kt("responseStart"),new Kt("responseEnd"),new Kt("domLoading"),new Kt("domInteractive"),new Kt("domContentLoaded"),new Kt("domComplete"),new Kt("loadEventStart").required(),new Kt("loadEventEnd")]};const wa={get_tracking_values:{v1:{handler:zi,properties:[new Kt("callback").required()]}},add_event:{v1:ha(ua()),v2:ha(ca())},add_impression:{v1:ga(ua()),v2:ga(ca())},add_generic_conversion:{v1:{handler:Xi,properties:[(new Wt).substitute([(new Wt).map("properties",[new Kt("virtual_order_id").optional(),new Kt("app_name").optional(),new Kt("package_id").optional(),new Kt("package_category").optional()]),new Kt("area").required(),new Kt("product").required(),new Kt("revenue").required(),new Kt("action").required()]),(new Wt).substitute(ia())]}},add_page_request:{v1:{handler:So,properties:[new Kt("virtual_path"),(new Wt).substitute(ia())]}},add_virtual_page_perf:{v1:{handler:Mi,properties:[new Kt("virtual_path").required(),(new Wt).map("timing_metrics",_a()).required(),new Kt("perf_mark_name"),(new Wt).substitute(ia())]},v2:{handler:Mi,properties:[new Kt("type").required(),(new Wt).map("timing",[(new Wt).map("navigation",_a()).required()]).required()]}},add_page_perf:{v1:{handler:Jo,properties:[(new Wt).substitute(ia())]}},add_perf:{v1:{handler:ni,properties:[new Kt("type").required().transform(ra),new Kt("properties"),(new Wt).substitute(ia())]}},get_variant_for_experiment:{v1:{handler:na,properties:ya()},v2:{handler:na,properties:[(new Wt).substitute(ya()).extend([new Kt("traffic_type").required(),new Kt("configuration")])]}},add_experiment:{v1:{handler:vi,properties:[(new Wt).substitute(aa()).extend([new Kt("experiment_type")])]}},add_experiment_assignment:[{type:"abn",v1:va()},{type:"mvt",v1:va()}],add_promotion:[{type:"click",v1:ma(ua()),v2:ma(ca())},{type:"impression",v1:ba(ua()),v2:ba(ca())}],add_ecomm_event:[{type:"add_to_cart",v1:{handler:xi,properties:[(new Wt).substitute(da())]}},{type:"remove_from_cart",v1:{handler:xi,properties:[(new Wt).substitute(da())]}},{type:"begin_checkout",v1:{handler:xi,properties:[(new Wt).substitute(pa()),(new Wt).substitute(ia())]}},{type:"checkout_progress",v1:{handler:xi,properties:[(new Wt).substitute(pa()).extend([new Kt("payment_processor"),(new Wt).substitute(ia())])]}},{type:"purchase",v1:{handler:xi,properties:[(new Wt).substitute([new Kt("transaction_id").required(),new Kt("activation_redirect"),new Kt("first_order"),new Kt("hashed_email"),new Kt("new_customer"),new Kt("order_discount_usd"),new Kt("order_total_new_usd"),new Kt("order_total_renewal_usd"),new Kt("order_from_website"),new Kt("page_type"),new Kt("order_region"),new Kt("original_currency"),new Kt("payment_pending"),new Kt("payment_processor"),(new Wt).substitute(la([new Kt("price").required(),new Kt("original_currency_subtotal")])).extend([new Kt("currency").required(),new Kt("value").required()])]).extend([new Ht("new_vs_renewal").transform((function(e,t){var n;if(!isNaN(parseFloat(t.order_total_new_usd))&&!isNaN(parseFloat(t.order_total_renewal_usd)))return p({"new-and-renewal-products":parseFloat(t.order_total_new_usd)>0&&parseFloat(t.order_total_renewal_usd)>0,"new-product-only":parseFloat(t.order_total_new_usd)>0&&0===parseFloat(t.order_total_renewal_usd),"renewal-product-only":0===parseFloat(t.order_total_new_usd)&&parseFloat(t.order_total_renewal_usd)>0,"unknown-products":0===parseFloat(t.order_total_new_usd)&&0===parseFloat(t.order_total_renewal_usd)},(function(e,t){!0===t&&(n=e)})),n}))]),(new Wt).substitute(ia())]}}]};var Oa=function(e){_()._expDataLayer.push({schema:"add_page_request",version:"v1",data:{virtual_path:e}})},ja=function(e,t,n,r,o){_()._expDataLayer.push({schema:"add_event",version:"v1",data:{type:e,eid:t,custom_properties:lo(n),dom_element:r,dom_event:o}})},Sa=function(e,t){_()._expDataLayer.push({schema:"add_perf",version:"v1",data:{type:e,properties:t}})},Pa=function(e){_()._expDataLayer.push({schema:"get_tracking_values",version:"v1",data:{callback:e}})},ka=function(){_()._expDataLayer.push({schema:"add_page_perf",version:"v1"})},Ea=function(e,t,n){_()._expDataLayer.push({schema:"add_impression",version:"v1",data:{eid:e,properties:lo(t),dom_element:n}})},xa=[/\blocation\.href\b/i,/\bwindow\.location\b/i,/\batlPCGoToUrl\b/i,/\bpcj_lnkx\b/i,/\bpcj_win\b/i],Ca=/^(#|(javascript|mailto|file|ftp):)/i,Ta=/^(https?:)?\/\//,Ia=function(e){return P((function(e){if(e.onclick)return e}),e)},Ra=function(e){if(e){var t=e.target||e.srcElement||e.currentTarget;return t&&t.nodeType&&3===t.nodeType&&(t=t.parentNode),t}},La=function(e){var t=T(e,{data:"data-track-click"});if(t.data)return JSON.parse(t.data)},Da=function(e,t){return I(e,t)},Aa=function(e){return T(e,{schema:"data-schema",id:"data-promo-id",name:"data-promo-name",creative_name:"data-creative-name",creative_slot:"data-creative-slot"})},qa=function(e){if(e||(e=_().event),e){var t=Ra(e);if(!t)return!0;var n=La(t),r="e_id"in Da(t,e),o="add_promotion"===Aa(t).schema;if(!n&&!r&&!o)return!0;!function(e){if(e){var t=Ia(e);if(t&&t.onclick){var n=t.onclick,r=n.toString(),o=!1;if(r)for(var i=0;i<xa.length&&!(o=xa[i].test(r));i++);o&&(t.onclick=function(e,t){t&&t.run&&n()},e.interceptOnClick=!0,t.interceptOnClick=!0)}}}(t)}},Ba=function(e){e&&(e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault&&e.preventDefault())},Fa=function(e,t){var n=function(e){return P((function(e){var t=x(e,"href");if(C(e)&&t&&t.length>0){var n=x(e,"target");if(n&&"_self"!==n)return;if(!function(e){return e&&(Ca.test(e)||function(e){if(Ta.test(e))return!1;var t=Te("page","spa");return!!t&&new RegExp("^"+(!0===t?"/":t).replace("/","\\/")).test(e)}(e))}(t))return t}}),e)}(e);return!!n&&(Ba(t),t.metaKey||t.ctrlKey?_().open(n):setTimeout((function(){w().location.href=n}),Te("clickListener","navDelayMs")),!0)},Ma=function(e){try{if(e||(e=_().event),!e)return!0;var t=Ra(e);if(!t)return!0;if(!function(e,t){var n,r,o,i=La(e),a=Da(e,t),c=Aa(e),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(Na()>=17&&t.hasOwnProperty("_reactRootContainer"))||e}(t.cancelBubble,t.currentTarget),s="e_id"in a,f="add_promotion"===c.schema;if(u&&(i||s||f)&&!function(e){return P((function(e){return"true"===x(e,"data-tcc-ignore")}),e)}(e))return i?(o=i,_()._signalsDataLayer.push({schema:"add_click",data:o})):f?(r=a,(n=c).eid=r.e_id,_()._expDataLayer.push({schema:n.schema,type:"click",version:"v2",data:d(r,{eid:r.eid,custom_properties:m(r.usrin,"^",",")},n)})):s&&function(e){_()._expDataLayer.push({schema:"add_event",version:"v2",data:{type:"click",eid:e.e_id,tcode:e.tcode,ci:e.ci,tms:e.tms,href:e.href,custom_properties:m(e.usrin,"^",",")}})}(a),!0}(t,e))return!0;var n=function(e){return!!e&&(void 0!==e.returnValue&&!1===e.returnValue||!0===e.defaultPrevented)}(e);return!n&&!Fa(t,e)&&!function(e,t){var n=Ia(e);if(n&&n.onclick){var r=n.onclick;return!(!r||!n.interceptOnClick||(Ba(t),setTimeout((function(){r(t,{run:!0})}),Te("clickListener","navDelayMs")),0))}}(t,e)}catch(e){q(e)}return!0};function Na(){try{return _().React.version.split(".")[0]}catch(e){}}var Ua=function(e,t){_()[t]("load",(function(){var n=Na();if(n&&n>16)for(var r=w().body.getElementsByTagName("*"),o=0;o<r.length;o++){var i=r[o];i.hasOwnProperty("_reactRootContainer")&&i[t](e,Ma.bind(this))}}))},Va=!1,Ga="click",Ka="impression",Wa="add_to_cart",za="remove_from_cart",Ha="begin_checkout",Qa="checkout_progress",$a=function(e,t){var n=t.data,r=n.traffic.eid,o=n.element,i=void 0===o?{}:o,a=i.area,c=i.product,u=i.section,s=i.widget;return null!=r?r:"".concat(a,".").concat(c,".").concat(u,".").concat(s,".").concat(e)},Ja=function(e){var t=e.data,n=t.element,r=t.traffic.eid;return n?n.action:r.split(".").pop()},Xa=function(e){var t,n;switch(e.schemaId){case hr:return function(e,t,n){var r=n.newCustomerFlag,o=n.newVsRenewal;e=e||"modular-cart";var i=t?"payment-pending_":"payment-processed_";return"ecomm.payments.transaction.".concat(r?"new-customer_":"existing-customer_").concat(i).concat(o,".").concat(e,".success")}(null===(t=e.data.cart)||void 0===t?void 0:t.type,null===(n=e.data.payment)||void 0===n?void 0:n.pendingFlag,e.data.order);case vr:return"gpd.exp.tcc.add-to-cart.success";case br:return"gpd.exp.tcc.remove-from-cart.success";case mr:return 1===e.data.checkout.step?"gpd.exp.tcc.begin-checkout.success":"gpd.exp.tcc.checkout-progress.success";case gr:return"traffic.tcc.instrumentation.experiment.add_experiment";case Or:return"".concat("tcc.conversion.").concat(e.data.conversion.area,".").concat(e.data.conversion.product,".").concat(e.data.conversion.revenue,".").concat(e.data.conversion.action);case dr:return e.data.traffic.eid;case pr:return $a(Ja(e),e);case fr:return $a(Ga,e);case lr:return $a(Ka,e);case _r:case wr:return Xo}},Ya=function(e){switch(e.schemaId){case _r:case wr:return"pageperf";case dr:return e.data.traffic.eventCategory;case Or:return"genConv";case hr:case vr:case br:case mr:return"ecommerce";case gr:return"experiment";case pr:return Ja(e);case fr:return Ga;case lr:return Ka}},Za="page.log",ec="page.event",tc=["isc","ci","app","event"],nc=function(e,t){var n={};return e.forEach((function(e){n[e.name]=e[t]})),n},rc=function(e){var t=e.schemaId,n=e.data;switch(t){case yr:return"page.request";case vr:return Wa;case br:return za;case mr:return 1===n.checkout.step?Ha:Qa;case _r:case wr:return Za;case dr:return n.traffic.eid===Xo?Za:ec;default:return ec}};function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}var ic="_trfqSendLog",ac=[yr,vr,br,mr,hr,fr,lr,dr,pr,Or,wr,_r,gr],cc=function(e){var t=e.events,n=e.global,r=e.webContext,o=function(e){var t=e.traceId,n=e.context,r=e.page,o=void 0===r?{}:r,i=e.site,a=void 0===i?{}:i,c=e.consent,u=void 0===c?{}:c,s=e.client,f=void 0===s?{}:s;return{visitor_guid:n.visitorId,visit_guid:n.sessionId,customer_id:n.customerId,delegated:n.isDelegated,agent:void 0!==n.employeeId,gauid:n.googleClientId,page_count:o.sessionPageViewCount,location:o.location,sitename:o.host,page:o.virtualPath||o.path,virtual_path:o.virtualPath,referrer:o.referrer,marketid:a.market,privatelabelid:a.privateLabelId,has_consent:u.marketingFlag?"1":"0",page_id:o.id,content_group:o.contentGroup,cv:f.sdk.version,client_name:f.sdk.name,trace_id:t,rand:bo(),same_site:Te("cookie","sameSite")}}(n);t.forEach((function(e){var t=e.schemaId,i=e.data,a=d(o,function(e){var t,n,r,o=e.schemaId,i=e.data,a=e.webContext,c=new z({tms:a.tms,href:a.href,tcode:a.tcode,ci:a.ci,event_label:a.eventLabel,salessite:a.salesSiteFlag,corrid:a.pageCorrelationId,ucid:a.universalContactId,hashed_shopper_id:a.hashedShopperId,user_realm:a.userRealm,page_realm:i.traffic.identityRealm,eventdate:i.eventCreationTimestamp,timestamp:(t=i.eventCreationTimestamp,Math.round(new Date(t).getTime())),hit_id:i.producerEventId,event_type:rc(e),eventtype:Ya(e),e_id:Xa(e)}),u=new po(i.traffic.customProperties);return o===yr?function(e,t,n){var r=n.webContext,o=r.fsSessionId,i=r.fsDeviceId,a=r.tealiumAppName,c=n.global,u=c.page,s=c.client.device,f=s.viewportWidth,l=s.viewportHeight,p=s.screenResolutionWidth,d=s.screenResolutionHeight;e.merge({browx:f,browy:l,resx:p,resy:d,querystring:u.location.split("?").slice(1).join("?"),traced:dn.get("traced")}),t.merge({tealiumAppName:a,fsSessionId:o,fsDeviceId:i})}(c,u,e):o===_r||o===wr?function(e,t,n){var r=n.data,o=r.navigationType,i=r.response,a=r.timing,c=r.contentLoadType,u=n.webContext,s=u.virtualPath,f=u.page;if(e.merge({navigationType:o,nav_type:t===wr?"hard":c}),i&&e.merge(i),a){var l=a.navigation,p=a.marks,d=a.measures,y=a.paint,v=a.vitals;l&&e.merge(ye(l)),p&&e.set("marks",b(nc(p,"startTime"),"^",",")),d&&e.set("measures",b(nc(d,"duration"),"^",",")),y&&e.merge({fcp:y.firstContentfulPaint,fp:y.firstPaint,fetchStart:y.fetchStart,LCP:y.largestContentfulPaint}),v&&e.merge({timeToInteractive:v.timeToInteractive,CLS:v.cumulativeLayoutShift,FID:v.firstInputDelay}),s&&e.set("virtual_path",s),f&&e.set("page",f)}}(c,o,e):o===gr?function(e,t){var n=t.data,r=n.experimentId,o=n.experimentSource,i=n.variantId,a=t.webContext,c=a.contentId,u=a.experimentType;e.merge({experiment_type:u,experiment_id:r,experiment_source:o,variant_id:i,content_id:c})}(u,e):jr.includes(o)?function(e,t,n){var r=n.data,o=r.cart,i=r.payment,a=r.checkout,c=r.basket,u=r.order,s=r.products,f=r.packages,l=n.webContext;o&&e.merge({activation_redirect:o.activationRedirectFlag,cart_type:o.type}),i&&(e.merge({payment_pending:i.pendingFlag,payment_processor:i.processor}),t.merge({cart_payment_reason_response_code:i.reasonResponseCode,cart_payment_billing_country:i.billingCountry,cart_payment_error_code:i.errorCode})),a&&e.merge({checkout_option:a.option,checkout_step:a.step}),c&&e.merge({currency:c.currencyCode,coupon:c.couponCode}),u?e.merge({transaction_id:u.transactionId,first_order:u.firstOrderFlag,new_customer:u.newCustomerFlag,ecomm_value:u.valueUsd,order_discount_usd:u.discountUsd,order_total_new_usd:u.totalNewUsd,order_total_renewal_usd:u.totalRenewalUsd,new_vs_renewal:u.newVsRenewal}):e.set("ecomm_value",l.valueUsd),s&&e.set("items",JSON.stringify(s.map((function(e,t){var n,r;return y(d({id:e.productId,coupon:e.couponCode,name:e.productName,quantity:null===(n=e.quantity)||void 0===n?void 0:n.toString(),price:null===(r=e.priceUsd)||void 0===r?void 0:r.toString(),itemTrackingCode:e.itemTrackingCode},l.products?{category:l.products[t].category,brand:l.products[t].brand,variant:l.products[t].variant}:{}))})))),f&&e.set("packages",JSON.stringify(f.map((function(e){var t,n;return y({id:e.id,price:null===(t=e.priceUsd)||void 0===t?void 0:t.toString(),quantity:null===(n=e.quantity)||void 0===n?void 0:n.toString(),category:e.category})}))))}(c,u,e):o===Or&&function(e,t){var n=t.data,r=n.conversion,o=n.packageId,i=n.packageCategory,a=n.virtualOrderId;e.merge(d(r,{package_id:o,package_category:i,virtual_order_id:a}))}(u,e),c.set("usrin",u.stringify()),c.merge((n=i.traffic.pageLevelProperties,r=[],p(n,(function(e){tc.includes(e.toLowerCase())||r.push(e)})),d(n,{page_level_properties:r.join()}))),c.getProperties()}({schemaId:t,data:i,webContext:r,global:n}));!function(e,t){var n,r,o=qe("events.api")+t,i=(r={},p(e,(function(e,t){void 0!==t&&"object"!==oc(t)&&"[object Function]"!=={}.toString.call(t)&&(r[e]=t)})),n={},p(r,(function(e,t){void 0!==t&&(n[e]=encodeURIComponent(t))})),n),a=function(e,t){var n=-1===t.indexOf("?")?"?":"&",r=b(e,"&","=");return"".concat(t).concat(n).concat(r)}(i,o);Ce(a,b(i,"&","="),"GET",null,ic)}(a,function(e,t){return e===yr?"/image.aspx":e===_r||e===wr||e===dr&&t===Xo?"/b.aspx":"/pageEvents.aspx"}(t,i.traffic.eid))}))},uc=["da-DK","de-AT","de-CH","de-DE","el-GR","en-GB","en-IE","es-ES","fi-FI","fr-BE","fr-CH","fr-FR","it-CH","it-IT","nb-NO","nl-BE","nl-NL","pl-PL","pt-PT","sv-SE"],sc=["da-DK","de-AT","de-BE","de-CH","de-DE","el-GR","en-GB","en-IE","es-ES","fi-FI","fr-BE","fr-CH","fr-FR","it-CH","it-IT","nb-NO","nl-BE","nl-NL","pl-PL","pt-PT","sr-SR","sv-SE"],fc=["en-AE","ar-AE","en-HK","en-IL","en-MY","en-PH","ru-RU","tr-TR","uk-UA","vi-VN","zh-CN","zh-HK"],lc=function(e){var t=gn("market"),n=gn("OPTOUTMULTI");if(!t||sc.indexOf(t)>-1||n){if(!n)return!1;var r=n.split("|");return!(r.length<=e)&&-1===r[e].indexOf(":1")}return!0},pc=function(){return lc(1)},dc=function(){return lc(2)},yc=function(){return lc(3)};function vc(e){return vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(e)}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==vc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==vc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===vc(o)?o:String(o)),r)}var o}var bc,hc,gc,_c=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.host=t,this.accountId=n,this.dataLayerName=r,this.dataLogName=o,this._dataLayerLog=[],this.dataLayer=_()[this._gtagDataVariable]||[]}var t,n;return t=e,n=[{key:"init",value:function(){return this.loadGtag(),U(this.dataLayerName,this.dataLayer),N(this.dataLogName,this._dataLayerLog),this.push("js",new Date),this}},{key:"push",value:function(){ue(M(this.dataLogName),arguments),this.dataLayer.push(arguments)}},{key:"loadGtag",value:function(){Pe("".concat(this.host,"/gtag/js?id=").concat(this.accountId,"&l=").concat(this.dataLayerName))}},{key:"setGtagProps",value:function(e){if(e)return e.transport_type="beacon",e.send_to=this.accountId,e}}],n&&mc(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wc=function(){return(_().utag_data||{}).app_name},Oc=[yr,vr,br,mr,hr,fr,lr,dr,pr,Or],jc=[Xo],Sc=function(e){return e.filter((function(e){return e.schemaId!==dr||!e.data.traffic.eid.startsWith("hivemind")&&!jc.includes(e.data.traffic.eid)}))},Pc=[],kc=!1,Ec="sGtm",xc="_sGtmDataSendLog",Cc="_wGtmDataLayer",Tc="_wGtmDataSendLog",Ic=_()[Cc]||[],Rc=[];function Lc(){ue(M(Tc),arguments),Ic.push(arguments)}var Dc,Ac,qc=function(){var e=Te("sGtm","host");return e&&"undefined"!==e?"https://".concat(e):qe("g.sst")},Bc=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).privateLabelId;return!(!e||t&&An()!==t)},Fc=function(){return Bc(Te("sGtm","enabled"),Te("sGtm","whitelist"))},Mc=function(){return Bc(Te("wGtm","enabled"),Te("wGtm","whitelist"))},Nc=function(){return Ui(hc)},Uc=function(e){var t=Nc();e.data.forEach((function(e){e.webContext=t})),Ce("".concat(qc(),"/csp/collect"),null,"POST",e,xc,{},"include")},Vc=function(e){var t,n=e.schemaId,r=e.global,o=e.businessContext,i=e.webContext,a=void 0===i?{}:i,c={schemaId:n,global:r,businessContext:o,webContext:a};return a.tealiumAppName=wc(),a.ga4AccountId=(void 0===(t=_().utag_data)?{}:t).pl_ga_account_id,{baseData:c,webContext:a,wGtmWebContext:d(a,Nc())}},Gc=function(e,t){var n=e.events,r=t.baseData,o=t.wGtmWebContext;n.forEach((function(e){Lc("event",e.schemaId,d(r,{event:e},{webContext:o}))}))},Kc=function(e,t){var n=e.contextVersion,r=e.events,o=e.hasConversion,i=t.baseData,a=t.webContext,c=[];r.forEach((function(e){c.push(d(e,{webContext:a}))})),bc.pushEvent(d(i,{contextVersion:n,events:c}),o)},Wc=function e(){if(!dc()&&!Fc()||Ni()&&(!Fc()||Ui(hc))){kc=!0;var t=M("globalContext"),n=Pc.map((function(e){return d(e,{global:d(e.global,{consent:t.consent,context:d(e.global.context,{googleAccountId:t.context.googleAccountId})})})}));Fc()&&function(e){e.forEach((function(e){Kc(e,Vc(e))})),bc.flush()}(n),Mc()&&function(e){e.forEach((function(e){Gc(e,Vc(e))}))}(n)}else setTimeout(e,75)},zc=function(e){_()._signalsDataLayer=_()._signalsDataLayer||[],_()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-gtm",batch:!0,fields:["webContext","routing"],callback:function(e){var t=e.schemaId,n=e.global,r=e.businessContext,o=e.events,i=e.webContext,a=e.routing,c=a.hasConversion;!function(e){var t=Sc(e.events);if(0!==t.length){gc||(gc=(new Date).getTime()-1);var n=(new Date).getTime(),r=d(e,{events:t,webContext:d(e.webContext,{pageTitle:w().title},{engagementTimeDelta:n-gc})});if(gc=n,kc){var o=Vc(r);Fc()&&Kc(r,o),Mc()&&Gc(r,o)}else Pc.push(r)}}({businessContext:r,contextVersion:a.globalContextVersion,schemaId:t,global:n,events:o,webContext:i,hasConversion:c})},schemaIds:Oc}}),Fc()&&function(e){hc=Te("sGtm","account");var t=qc(),n=new _c(t,hc,"_sGtmDataLayer",xc).init();n.push("config","".concat(hc),{send_page_view:!1,anonymize_ip:!0,transport_url:qc(),first_party_collection:!0,groups:Ec}),N(xc,[]),bc=new Ve(Uc,10);var r={transport_url:t,send_to:"".concat(hc),groups:Ec};yn.getSession().pageCount<=1&&n.push("event","session_start",r),e&&n.push("event","consent_changed",r)}(e),Mc()&&(U(Cc,Ic),N(Tc,Rc),Lc("event","gtm.js",{"gtm.start":(new Date).getTime(),js:new Date}),Pe("https://www.googletagmanager.com/gtm.js?id=".concat(Te("wGtm","account"),"&l=").concat(Cc))),Wc()},Hc=function(e){return!!e||void 0},Qc=function(e){return function(t){var n=t.eid;return Hc(n&&!!n.match(e))}},$c=function(e){var t=_().ux;if(t&&t.data)return t.data[e]},Jc=function(e){return function(t){return t.event.data.traffic.customProperties[e]}},Xc={visitguid:{cd_scope:{1:"hit",2:"session"},fn:function(e){return e.global.context.sessionId}},visitorguid:{cd_scope:{3:"hit",4:"session",5:"user_scoped"},fn:function(e){return e.global.context.visitorId}},shopper_id:{cd_scope:{6:"hit",7:"session",8:"user_scoped"},fn:function(e){return e.webContext.hashedShopperId}},logged_in_status:{cd_scope:{15:"hit"},fn:function(e){var t=e.global.context,n=t.customerId,r=t.employeeId;return void 0!==(n||r)}},logged_in_status_defined:{cd_scope:{16:"session"},fn:function(e){var t=e.global.context,n=t.customerId,r=t.employeeId;return Hc(void 0!==(n||r))}},customer_agent_id:{cd_scope:{17:"hit",18:"session",19:"user_scoped"},fn:function(e){return e.global.context.employeeId}},customer_agent_bool:{cd_scope:{20:"hit"},fn:function(e){return void 0!==e.global.context.employeeId}},customer_agent_bool_defined:{cd_scope:{21:"session"},fn:function(e){var t=e.global.context.employeeId;return Hc(t)}},delegated_bool:{cd_scope:{22:"hit"},fn:function(e){return e.global.context.isDelegated}},delegated_bool_defined:{cd_scope:{23:"session"},fn:function(e){var t=e.global.context.isDelegated;return Hc(t)}},market:{cd_scope:{24:"hit",25:"session"},fn:function(e){return e.global.site.market}},referrer:{cd_scope:{26:"hit"},fn:function(e){return e.global.page.referrer}},isc:{cd_scope:{27:"hit",28:"session"},fn:function(e){var t=e.queryString;return De("isc",!1,t)}},user_agent:{cd_scope:{30:"hit",31:"session"},fn:function(e){return e.global.client.userAgent}},querystring:{cd_scope:{32:"hit"},fn:function(e){var t=e.queryString;return decodeURIComponent(Ae(t))}},privatelabelid:{cd_scope:{33:"hit",34:"session"},fn:function(e){return e.global.site.privateLabelId}},ci_code:{cd_scope:{40:"hit",41:"session"},fn:function(e){var t=e.queryString;return De("ci",!1,t)}},content_meta_tagging_values:{cd_scope:{43:""},fn:function(){return oe.get("tcc.contentMetaTaggingValues")}},timestamp:{cd_scope:{44:"hit"},fn:function(e){return e.event.data.eventCreationTimestamp}},eid_experimentation_exp_id:{cd_scope:{47:"hit",48:"session"},fn:function(e){return e.event.data.experimentId}},eid_experimentation_variant_id:{cd_scope:{45:"hit",46:"session"},fn:function(e){return e.event.data.variantId}},eid_sitecore_block_id:{cd_scope:{50:"hit"},fn:Jc("block_id")},eid_sitecore_module_id:{cd_scope:{51:"hit"},fn:Jc("module_id")},location_uri:{cd_scope:{52:"hit"},fn:function(e){var t=e.queryString;return e.global.page.path+t}},google_client_id:{cd_scope:{53:"hit",54:"session",55:"user_scoped"},fn:function(e){var t=e.global.context.googleClientId;return void 0===t?"Not Available":t}},uxcore_app:{cd_scope:{56:"hit"},fn:function(){return $c("app")}},uxcore_appname:{cd_scope:{57:"hit"},fn:function(){return $c("appName")}},uxcore_manifest_name:{cd_scope:{58:"hit"},fn:function(){return $c("manifest")}},uxcore_manifest_version:{cd_scope:{59:"hit"},fn:function(){return $c("manifestVersion")}},is_gd_salessite_bool:{cd_scope:{62:"hit"},fn:function(e){return e.webContext.salesSiteFlag}},is_gd_salessite_bool_defined:{cd_scope:{63:"session"},fn:function(e){var t=e.webContext.salesSiteFlag;return Hc(t)}},item_tracking_code:{cd_scope:{64:"product"}},purchase_payment_pending_bool:{cd_scope:{65:"hit"},fn:function(e){return e.event.data.payment.pendingFlag.toString()}},purchase_discount_applied_usd:{cd_scope:{66:"hit"},cm_scope:{3:""},fn:function(e){return e.event.data.order.discountUsd}},purchase_payment_processor:{cd_scope:{67:"hit"},fn:function(e){return e.event.data.payment.processor}},purchase_is_first_order:{cd_scope:{68:"hit",69:"session"},fn:function(e){return e.event.data.order.firstOrderFlag.toString()}},purchase_is_new_customer:{cd_scope:{70:"hit",71:"session"},fn:function(e){return e.event.data.order.newCustomerFlag.toString()}},purchase_is_activation_redirect:{cd_scope:{72:"hit"},fn:function(e){return e.event.data.cart.activationRedirectFlag.toString()}},content_meta_tagging_article_published_time:{cd_scope:{84:"hit"},fn:function(){return oe.get("tcc.contentMetaTaggingArticlePublishedTime")}},gocentral_optimizely_experiment:{cd_scope:{85:"session"}},correlation_id:{cd_scope:{87:"hit"},fn:function(e){return e.webContext.pageCorrelationId}},federation_partner_id:{cd_scope:{89:"user"},fn:function(e){return e.global.site.federationPartnerId}},traffic_load_source:{cd_scope:{91:"hit"},fn:function(e){return e.event.data.traffic.pageLevelProperties.loadSource}},purchase_new_vs_renewal:{cd_scope:{92:""},fn:function(e){return e.event.data.order.newVsRenewal}},page_id:{cd_scope:{93:"hit"},fn:function(e){return e.global.page.id}},traffic_tcc_version:{cd_scope:{94:"hit"},fn:function(e){return e.global.client.sdk.version}},package_ids:{cd_scope:{95:"hit"},fn:function(e){return e.event.data.packages.map((function(e){return e.id})).join(",")}},native_mobile_app_bool:{cd_scope:{96:"session"},fn:function(e){return void 0!==e.global.mobile.deviceId}},native_mobile_appname:{cd_scope:{97:"session"},fn:function(e){return e.global.mobile.applicationName}},hit_id:{cd_scope:{98:"hit"},fn:function(e){return e.event.data.producerEventId}},realm:{cd_scope:{99:"hit",100:"session"},fn:function(e){return e.event.data.traffic.identityRealm}},existing_shopper:{cd_scope:{102:"user_scoped",107:"session"},value:"0"},eid_experimentation_content_id:{cd_scope:{103:"hit",104:"session"},fn:function(e){return e.webContext.contentId}},eid_experimentation_source_id:{cd_scope:{105:"hit",106:"session"},fn:function(e){return e.event.data.experimentSource}},add_to_cart_domain_extension:{cd_scope:{108:"hit"},fn:function(e){var t=e.event;if(e.eid.match("^find.sales.domain_.*.buy.click$"))return t.data.traffic.customProperties.extension}},eid_experimentation_qualtrics_survey_id_hit:{cd_scope:{109:"hit"},fn:function(){return gn("Qint_id")}},purchase_transaction_id:{cd_scope:{112:"hit"},fn:function(e){return e.event.data.order.transactionId}},customer_id:{cd_scope:{116:"hit",117:"session",118:"user_scoped"},fn:function(e){return e.global.context.customerId}},parent_customer_id:{cd_scope:{119:"hit",120:"session",121:"user_scoped"},fn:function(e){return e.global.context.parent.customerId}},payment_reason_response_code:{cd_scope:{122:""},fn:function(e){return e.event.data.payment.reasonResponseCode}},payment_billing_country:{cd_scope:{123:""},fn:function(e){return e.event.data.payment.billingCountry}},purchase_cart_type:{cd_scope:{124:""},fn:function(e){return e.event.data.cart.type}},payment_error_code:{cd_scope:{125:""},fn:function(e){return e.event.data.payment.errorCode}},itc:{cd_scope:{127:"hit"},fn:Jc("item_tracking_code")},cart_edit_bool:{cd_scope:{128:""},fn:function(e){return e.event.data.cart.editFlag}},cart_edit_pfid_before:{cd_scope:{129:""},fn:function(e){return e.event.data.cart.beforePfid}},cart_edit_pfid_after:{cd_scope:{130:""},fn:function(e){return e.event.data.cart.afterPfid}},cart_edit_qty_before:{cd_scope:{131:""},fn:function(e){return e.event.data.cart.beforeQuantity}},cart_edit_qty_after:{cd_scope:{132:""},fn:function(e){return e.event.data.cart.afterQuantity}},consent_status:{cd_scope:{133:"hit"},fn:function(){return dn.get("consentModeStatus")}},sitesearch_term:{cd_scope:{134:"hit"},fn:Jc("sitesearch_term")},sitesearch_results:{cd_scope:{135:"hit"},fn:Jc("sitesearch_results")},plp_category_selected:{cd_scope:{136:"hit"},fn:Jc("plp_category_selected")},plp_tags_selected:{cd_scope:{137:"hit"},fn:Jc("plp_tags_selected")},plp_business_selected:{cd_scope:{138:"hit"},fn:Jc("plp_business_selected")},plp_order:{cd_scope:{139:"hit"},fn:Jc("plp_order")},sitesearch_urls:{cd_scope:{140:"hit"},fn:Jc("sitesearch_urls")},sitesearch_tab:{cd_scope:{141:"hit"},fn:Jc("sitesearch_tab")},sitesearch_category:{cd_scope:{142:"hit"},fn:Jc("sitesearch_category")},search_suggestions:{cd_scope:{143:"hit"},fn:Jc("search_suggestions")},autocomplete:{cd_scope:{144:"hit"},fn:Jc("autocomplete")},popular_terms:{cd_scope:{145:"hit"},fn:Jc("popular_terms")},trace_id:{cd_scope:{146:"hit"},fn:function(e){return e.global.traceId}},eid_fos_impressions:{cm_scope:{1:""},fn:function(e){var t=e.event,n=e.eid;return t.schemaId===lr&&n&&!!n.match("^gce.sales./..*")||void 0}},eid_fos_clicks:{cm_scope:{2:""},fn:function(e){var t=e.event,n=e.eid;return t.schemaId===fr&&n&&!!n.match("^gce.sales./..*")||void 0}},uxp_impression:{cm_scope:{4:"hit"},fn:Qc("^uxp.hyd.int.salesheader.sales.impression$")},uxp_product_nav_click:{cm_scope:{5:"hit"},fn:Qc("^uxp.hyd.product_nav..*.click$")},uxp_sales_header_click:{cm_scope:{6:"hit"},fn:Qc("^uxp.hyd.sales_header..*.click$")},uxp_shared_click:{cm_scope:{7:"hit"},fn:Qc("^uxp.hyd.shared..*.click$")},uxp_sales_footer_click:{cm_scope:{8:"hit"},fn:Qc("^uxp.hyd.sales_footer..*.click$")},content_group1:{fn:function(e){return e.global.page.contentGroup}},coupon:{fn:function(e){var t=e.event.data.basket.couponCode;if("???"!==t)return t}}},Yc=function(e,t){if(void 0!==e.value)return e.value;var n;if(e.fn)try{n=e.fn(t)}catch(e){}return function(e){return!0===e?"1":!1===e?"0":""!==e?e:void 0}(n)},Zc=function(e){var t={};return p(Xc,(function(n,r){!0===e&&void 0===r.cd_scope&&void 0===r.cm_scope||(!1!==e||void 0===r.cd_scope&&void 0===r.cm_scope)&&(t[n]=r)})),t},eu=function(e,t){var n={},r=Zc(!0);return p(r,(function(r,o){for(var i=["cd_scope","cm_scope"],a=0;a<i.length;a++)if(o.hasOwnProperty(i[a])){var c="dimension",u=o.cd_scope;"cm_scope"===i[a]&&(u=o.cm_scope,c="metric");var s=Object.keys(u),f=void 0;e&&(f=Yc(o,t));for(var l=0;l<s.length;l++){var p=s[l],d=r;if(u&&u.hasOwnProperty(p)){var y=u[p];y&&(d+="_".concat(y))}e?n[d]=f:n[c+p]=d}}})),n},tu=function(){return eu(!1)},nu=["impression","experiment","load","apicall","split-test","redux","change","custom","impress","blur","view","applog","show","success","perf","loaded","clicktaleu","notify","clicktale","consent","timing"],ru=function(e,t){var n,r=t.path,o=t.virtualPath;return e&&-1!==e.indexOf("utm_content=")&&(n=Ae(e)),o||(n?r+n:void 0)},ou=function(e){var t=e.data.promotion;return{id:t.id,name:t.name,creative_slot:t.position,creative_name:t.creative}},iu=function(e,t){var n=t.data.products;return(void 0===n?[]:n).map((function(t,n){return d({id:t.productId,coupon:t.couponCode,name:t.productName,quantity:t.quantity,price:t.priceUsd,item_tracking_code_product:t.itemTrackingCode},e.products?{category:e.products[n].category,brand:e.products[n].brand,variant:e.products[n].variant}:{})}))},au=function(e,t,n,r){var o,i,a,c,u,s,f=Xa(t),l="?".concat(e.page.location.split("?").slice(1).join("?")),y=new z((u=eu(!0,c={global:e,webContext:n,event:t,eid:f,queryString:l}),s=function(e){var t={},n=Zc(!1);return p(n,(function(n,r){t[n]=Yc(r,e)})),t}(c),d(u,s)));if(t.schemaId===yr)y.merge({custom_map:tu(),send_page_view:!0,anonymize_ip:!0,page_path:Re(ru(l,e.page))}),i="page_view";else if(jr.includes(t.schemaId)){var v,m;y.merge({items:iu(n,t),currency:null===(v=t.data.basket)||void 0===v?void 0:v.currencyCode,value:(null===(m=t.data.order)||void 0===m?void 0:m.valueUsd)||n.valueUsd}),t.schemaId===hr&&y.set("transaction_id",t.data.order.transactionId),i=a=function(e){switch(e.schemaId){case hr:return"purchase";case vr:return Wa;case br:return za;case mr:return 1===e.data.checkout.step?Ha:Qa}}(t)}else(function(e){var t=e.schemaId,n=e.data;switch(t){case dr:return nu.includes(n.traffic.eventCategory.substring(0,10));case pr:return nu.includes(n.element?n.element.action:n.traffic.eid.split(".").pop());case Or:case yr:case wr:case _r:case lr:case gr:return!0}})(t)&&y.set("non_interaction",!0),t.schemaId===fr&&t.data.promotion?(y.set("promotions",[ou(t)]),i="select_content",f="traffic.tcc.instrumentation.internal_promotion.click",a="internal_promotion_click"):t.schemaId===lr&&r?(y.set("promotions",r),i="view_promotion",f="traffic.tcc.instrumentation.internal_promotion.impression",a="internal_promotion_impression"):i=f;return y.merge({event_category:null!==(o=a)&&void 0!==o?o:Ya(t),event_label:t.schemaId===gr?t.data.experimentId:n.eventLabel,event_action:f}),{eventAction:i,properties:y.getProperties()}};function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uu,su,fu,lu,pu,du,yu=[],vu=20,mu=function(){return uu||(uu=new _c("https://www.googletagmanager.com",Te("ga","account"),"_analyticsDataLayer","_analyticsDataSendLog")),uu},bu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];yu.push(t)},hu=function(e){return void 0!==e&&"set"!==e[0]},gu=function(){if(yu.length>0&&(vu>0||!hu(yu[0])))try{var e,t=yu.shift();(e=mu()).push.apply(e,function(e){if(Array.isArray(e))return cu(e)}(n=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cu(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),hu(t)&&(vu-=1),0===vu&&setTimeout((function(){vu+=2}),1e3)}catch(e){}var n},_u=function(e,t){var n,r=t.eventAction,o=t.properties;n=e.hashedUserId,Ac!==n&&(Ac=n,bu("set","user_id",n)),mu().setGtagProps(o,Dc),bu("event",r,o)},wu=function(e){var t,n,r=e.global,o=e.events,i=e.webContext,a=o.filter((function(e){return e.schemaId===lr&&e.data.promotion}));a.length>0&&_u(i,au(r,a[0],i,a.map(ou))),Sc((t=o,n=a,t&&n?t.filter((function(e){return!n.includes(e)})):t)).forEach((function(e){_u(i,au(r,e,i))}))},Ou=function e(){var t,n=dc(),r=(dc()||pc()||yc())&&(Fc()||Mc());n||r?(Gn.updateContext(),n&&(Dc=Te("ga","account"),mu().init(),(t={send_page_view:!1,anonymize_ip:!0,page_referrer:w().referrer}).custom_map=tu(),mu().push("config",Dc,t),setInterval(gu,100),_()._signalsDataLayer=_()._signalsDataLayer||[],_()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-ga",batch:!0,callback:wu,schemaIds:Oc,fields:["webContext"]}})),r&&zc(!1===su)):(su=!1,setTimeout(e,Te("consent","delayMs")))},ju={},Su=["idp","jomax"],Pu={idp:"info_shopperId",jomax:"info_accountName"},ku=function(e){return Object.keys(e).length<1},Eu=function(e){var t={},n=gn("info_"+e);if(n)try{t=JSON.parse(n)}catch(e){}return t},xu=function(){return!ku(ju)},Cu=function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.del){if(t.del.typ===n||t.del.del)return r=!1,e(t.del,n,r);if(n===t.typ&&!r)return t[t.auth]}if(n===t.typ&&!r)return t},Tu=function(e,t){return e?t?(r=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e,t){return e>>>t|e<<32-t},i=function(e,t){return e>>>t},a=function(e,t,n){return e&t^~e&n},c=function(e,t,n){return e&t^e&n^t&n},u=function(e){return o(e,2)^o(e,13)^o(e,22)},s=function(e){return o(e,6)^o(e,11)^o(e,25)},f=function(e){return o(e,7)^o(e,18)^i(e,3)},function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>8*(3-r%4)+4&15)+t.charAt(e[r>>2]>>8*(3-r%4)&15);return n}(function(e,t){var n,l,p,d,y,v,m,b,h,g,_,w,O,j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],P=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,h=0;h<e.length;h+=16){for(n=S[0],l=S[1],p=S[2],d=S[3],y=S[4],v=S[5],m=S[6],b=S[7],g=0;g<64;g++)P[g]=g<16?e[g+h]:r(r(r((O=P[g-2],o(O,17)^o(O,19)^i(O,10)),P[g-7]),f(P[g-15])),P[g-16]),_=r(r(r(r(b,s(y)),a(y,v,m)),j[g]),P[g]),w=r(u(n),c(n,l,p)),b=m,m=v,v=y,y=r(d,_),d=p,p=l,l=n,n=r(_,w);S[0]=r(n,S[0]),S[1]=r(l,S[1]),S[2]=r(p,S[2]),S[3]=r(d,S[3]),S[4]=r(y,S[4]),S[5]=r(v,S[5]),S[6]=r(m,S[6]),S[7]=r(b,S[7])}return S}(function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(n=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(n=t)),8*n.length))):void 0:t;var n,r,o,i,a,c,u,s,f},Iu=function(e,t,n){if(xu()&&"basic"!==ju.auth){var r=Cu(ju,n);if(r)return Tu(t,r[e])}},Ru=function(e){return Iu(Pu.jomax,e,"jomax")},Lu=function e(t,n,r){var o=t.typ;if(void 0===r||!o||o===r){var i=t.auth;return i&&"basic"!==i?e(t[i],n,r):t[n]}},Du=function(e){if(xu()&&"idp"===ju.typ)return Tu(e,Lu(ju,"info_shopperId"))},Au=function(e){if(xu())return Lu(ju,e)},qu={"context.visitorId":function(e){return e.session.visitorGuid},"context.sessionId":function(e){return e.session.visitGuid},"context.customerId":function(){return function(e){if(xu())return Tu(void 0,Lu(ju,"info_cid"))}()},"context.identityId":function(){return Au("info_identity")},"context.googleClientId":function(){return Ni()},"context.isDelegated":function(e){return e.delegated},"context.parent.customerId":function(e){return e.delegated?Iu("info_cid",undefined,"idp"):void 0},"context.parent.agentId":function(e){return e.delegated?Ru(!0):void 0},"context.employeeId":function(){return function(e){if(xu()){var t=ju.typ,n=ju.auth,r=Pu.jomax;if(n&&"basic"!==n&&"e"===n.charAt(0))return Ru(e);if(t&&"jomax"===t)return Tu(e,ju[r]);var o=Eu("jomax");if(!ku(o))return Tu(e,o[r])}}(!0)},"attribution.isc":function(){return function(){if(bn)return bn;for(var e=0;e<On.length;e++){var t=On[e]();if(t){bn=t.replace("|","");break}}return bn}()},"mobile.applicationName":function(){return De("native_app_name",!0)},"mobile.applicationVersion":function(){return De("native_app_version",!0)},"mobile.deviceId":function(){return De("mdeviceid",!0)},"consent.analyticsFlag":function(){return dc()},"consent.marketingFlag":function(){return pc()},"consent.supportFlag":function(){return yc()},"page.sessionPageViewCount":function(e){return e.session.pageCount},"site.federationPartnerId":function(){return function(){if(xu()){var e=Lu(ju,"fpid");if(!e){var t=ju.typ;void 0!==t&&(e=gn("brand_".concat(t)))}return e}}()},"site.market":function(){return gn("market")}},Bu={delegated:function(){return function(){if(!xu())return!1;var e=ju.auth;return e&&"basic"!==e}()},session:function(){return yn.getSession()}},Fu=["www","ca","uk","sg","au","in","mx","ph","br","my","hk","tr","tw","co","pe","pk","es","vn","nz","ar","za","id","th","ie","ru","fr","it","cl","de","nl","ve","kr","jp","pt","ua","ch","be","se","gr","dk","fi","pl","no","at","cart","ae","il","auctions","account","myh","websites","ar-ae","lite","asia","host"],Mu={salesSiteFlag:function(){if(void 0===fu){fu=!1;var e=j();if(-1===e.indexOf("godaddy.com"))return fu;var t=e.split(".");if(t.length>=2)if(2===t.length)fu=!0;else for(var n=t.slice(0,t.length-2),r=0;r<n.length;r++){var o=n[r];if(Fu.indexOf(o)>-1){fu=!0;break}}}return fu},pageCorrelationId:function(){return dn.get("corrid")},shopperId:function(){return Du(!1)},hashedShopperId:function(){return Du(!0)},hashedUserId:function(){return function(e){if(xu()){var t=ju.typ;return Tu(!0,Lu(ju,Pu[t]))}}()},userRealm:function(){if(xu())return ju.typ},universalContactId:function(){return Au("ucid")},loggedInFlag:xu,tealiumAppName:wc,fsSessionId:function(e){var t=e.fs;return(void 0===t?{}:t).sessionId},fsDeviceId:function(e){var t=e.fs;return(void 0===t?{}:t).deviceId}},Nu={fs:function(){try{var e=function(){var e=_().FS;if(e)return e.getCurrentSession()}()||function(){var e=gn("fs_uid");if(e){var t=e.split("#")[2];return t&&t.split(":").slice(0,2).join(":")}}();if(e){var t=e.split(":");return{deviceId:t[0],sessionId:t[1]}}}catch(e){}}},Uu=[function(){return(e=_().ux,t=(void 0===e?{}:e).data,void 0===t?{}:t).privateLabelId;var e,t},function(){return at().privatelabelid},function(){return Au("plid")}],Vu="tcc";kt(wa),lu=new Wo,yn=lu,pu=Uu,Dn.push.apply(Dn,function(e){if(Array.isArray(e))return Rn(e)}(du=pu)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(du)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(du)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var Gu=function(){Ao({legacyName:Vu,trfqMethods:r,configManagerProps:{legacyName:Vu,dataLayerName:"_gaDataLayer",clientConfigPrefixes:[Vu,"gtm"],ignoredProperties:["shopperid","marketid","currency"]},dataLayerConfig:{pageViewSchema:"add_page_request",immediateSchemas:["add_page_request","get_tracking_values","add_ecomm_event"]},globalContextConfig:{contextFnMap:qu,paramsFnMap:Bu},hooks:{beforeInit:function(){!function(){if(!gn("_policy")){var e=gn("market"),t=!e||uc.indexOf(e)>-1,n="none";!e||sc.indexOf(e)>-1?n="explicit":fc.indexOf(e)>-1&&(n="implicit");var r={restricted_market:t,tracking_market:n};hn("_policy",JSON.stringify(r),525600,"/")}}()},beforeLoad:function(){var e;In.init({contextFnMap:Mu,paramsFnMap:Nu}),_()._tccTrackingValues=ui.properties,!e&&Va||(function(){if(Te("clickListener","enabled")&&!_().tccListenerDisabled){var e=w().getElementsByTagName("html");if(e)for(var t=_().attachEvent,n=O()&&O().userAgent&&null!=O().userAgent.match(/iPad/i),r=0,o=e.length;r<o;r++){var i=e[r];i&&i.attributes&&i.attributes["data-tcc-ignore"]||(_().addEventListener?n?(i.addEventListener("touchstart",Ma,!1),Ua("touchstart","addEventListener"),i.addEventListener("touchend",qa,!1)):(i.addEventListener("click",Ma,!1),Ua("click","addEventListener"),i.addEventListener("mousedown",qa,!1)):t&&(i.attachEvent("onclick",Ma),Ua("onclick","attachEvent"),i.attachEvent("mousedown",qa)))}}}(),Va=!0)},onLoad:function(){N(ic,[]),_()._signalsDataLayer=_()._signalsDataLayer||[],_()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-service",batch:!0,callback:cc,schemaIds:ac,fields:["webContext"]}}),"pass"!==$e("identity","realm")&&Ou(),$e("webVitals","enabled")&&Pe(Te("webVitals","url"),!0,(function(){_().tti.calculateTTI()})),function(){var e=De("orderId");if(e)try{var t=gn("pd".concat(e));if(t){var n=JSON.parse(decodeURIComponent(t));n&&n.orderData&&(_()._expDataLayer=_()._expDataLayer||[],_()._expDataLayer.push(n.orderData))}}catch(e){}}()},beforeEvent:function(){!function(){for(var e={},t=0;t<Su.length;t++){var n=Eu(Su[t]);!ku(n)&&(ku(e)||e.iat<n.iat)&&(e=n)}ju=e}()}}})};Gu();const Ku=Gu;return t})()));